<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>7.多进程、MySQL | Girecord</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/pencil.png">
    <meta name="description" content="Giria的学习记录">
    <link rel="preload" href="/assets/css/0.styles.a748b10c.css" as="style"><link rel="preload" href="/assets/js/app.d811c258.js" as="script"><link rel="preload" href="/assets/js/2.b0d06978.js" as="script"><link rel="preload" href="/assets/js/50.b2344657.js" as="script"><link rel="prefetch" href="/assets/js/10.c058f302.js"><link rel="prefetch" href="/assets/js/11.8dd384d0.js"><link rel="prefetch" href="/assets/js/12.a57db71e.js"><link rel="prefetch" href="/assets/js/13.ba28784c.js"><link rel="prefetch" href="/assets/js/14.c932930e.js"><link rel="prefetch" href="/assets/js/15.214d63a1.js"><link rel="prefetch" href="/assets/js/16.d7b01f05.js"><link rel="prefetch" href="/assets/js/17.d86602f8.js"><link rel="prefetch" href="/assets/js/18.9f5cd19a.js"><link rel="prefetch" href="/assets/js/19.7fd1e862.js"><link rel="prefetch" href="/assets/js/20.d65b214c.js"><link rel="prefetch" href="/assets/js/21.1b73581a.js"><link rel="prefetch" href="/assets/js/22.a1991fce.js"><link rel="prefetch" href="/assets/js/23.86ad9e68.js"><link rel="prefetch" href="/assets/js/24.65381257.js"><link rel="prefetch" href="/assets/js/25.7bd935b2.js"><link rel="prefetch" href="/assets/js/26.32e3f54b.js"><link rel="prefetch" href="/assets/js/27.4b8a459a.js"><link rel="prefetch" href="/assets/js/28.8fbb372e.js"><link rel="prefetch" href="/assets/js/29.14d35dd5.js"><link rel="prefetch" href="/assets/js/3.2e07bdbd.js"><link rel="prefetch" href="/assets/js/30.836a9de2.js"><link rel="prefetch" href="/assets/js/31.557cf90d.js"><link rel="prefetch" href="/assets/js/32.9cb9ce1c.js"><link rel="prefetch" href="/assets/js/33.75bed696.js"><link rel="prefetch" href="/assets/js/34.62b0841c.js"><link rel="prefetch" href="/assets/js/35.ddeecc7e.js"><link rel="prefetch" href="/assets/js/36.dda463c4.js"><link rel="prefetch" href="/assets/js/37.16b89d36.js"><link rel="prefetch" href="/assets/js/38.b10e01fe.js"><link rel="prefetch" href="/assets/js/39.0c104c50.js"><link rel="prefetch" href="/assets/js/4.35c41ba6.js"><link rel="prefetch" href="/assets/js/40.f0cb89f5.js"><link rel="prefetch" href="/assets/js/41.480570b4.js"><link rel="prefetch" href="/assets/js/42.08b42bef.js"><link rel="prefetch" href="/assets/js/43.8d61e275.js"><link rel="prefetch" href="/assets/js/44.b8e43077.js"><link rel="prefetch" href="/assets/js/45.54d487f1.js"><link rel="prefetch" href="/assets/js/46.5a382eae.js"><link rel="prefetch" href="/assets/js/47.1f8796a9.js"><link rel="prefetch" href="/assets/js/48.8d46e23a.js"><link rel="prefetch" href="/assets/js/49.72b8ca20.js"><link rel="prefetch" href="/assets/js/5.7b10027c.js"><link rel="prefetch" href="/assets/js/51.080a56f5.js"><link rel="prefetch" href="/assets/js/52.bad7a065.js"><link rel="prefetch" href="/assets/js/53.ad9bdcfd.js"><link rel="prefetch" href="/assets/js/54.6770d917.js"><link rel="prefetch" href="/assets/js/55.c0172ecd.js"><link rel="prefetch" href="/assets/js/56.49c919d4.js"><link rel="prefetch" href="/assets/js/57.1767b53b.js"><link rel="prefetch" href="/assets/js/58.41eeaa28.js"><link rel="prefetch" href="/assets/js/59.64f20b7f.js"><link rel="prefetch" href="/assets/js/6.5964ef22.js"><link rel="prefetch" href="/assets/js/60.0f75477a.js"><link rel="prefetch" href="/assets/js/61.4be6c4a4.js"><link rel="prefetch" href="/assets/js/62.e5d06d6d.js"><link rel="prefetch" href="/assets/js/63.955d4114.js"><link rel="prefetch" href="/assets/js/64.d3e90038.js"><link rel="prefetch" href="/assets/js/65.e8997251.js"><link rel="prefetch" href="/assets/js/66.e43a4e42.js"><link rel="prefetch" href="/assets/js/67.178746ff.js"><link rel="prefetch" href="/assets/js/68.8b74209e.js"><link rel="prefetch" href="/assets/js/69.cd787813.js"><link rel="prefetch" href="/assets/js/7.a1320352.js"><link rel="prefetch" href="/assets/js/70.51f9e21c.js"><link rel="prefetch" href="/assets/js/71.e52c53ad.js"><link rel="prefetch" href="/assets/js/72.48ee5f30.js"><link rel="prefetch" href="/assets/js/73.d271fa49.js"><link rel="prefetch" href="/assets/js/74.a6baf45f.js"><link rel="prefetch" href="/assets/js/75.096cf42e.js"><link rel="prefetch" href="/assets/js/76.a2318a27.js"><link rel="prefetch" href="/assets/js/8.6a3c595d.js"><link rel="prefetch" href="/assets/js/9.586c950f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a748b10c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Girecord</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源码学习" class="dropdown-title"><span class="title">源码学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="源码学习" class="mobile-dropdown-title"><span class="title">源码学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/source/element/" class="nav-link">
  Element UI
</a></li><li class="dropdown-item"><!----> <a href="/source/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="书籍学习" class="dropdown-title"><span class="title">书籍学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="书籍学习" class="mobile-dropdown-title"><span class="title">书籍学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/books/theDefinitiveGuideToJavaScript/" class="nav-link">
  JavaScript权威指南
</a></li><li class="dropdown-item"><!----> <a href="/books/theNodeBeginnerBook/" class="nav-link">
  NodeJS入门
</a></li><li class="dropdown-item"><!----> <a href="/books/diveIntoNode/" class="nav-link">
  深入浅出Node.js
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法学习" class="dropdown-title"><span class="title">算法学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法学习" class="mobile-dropdown-title"><span class="title">算法学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/codingInterviews/" class="nav-link">
  剑指Offer系列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文学习" class="dropdown-title"><span class="title">博文学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文学习" class="mobile-dropdown-title"><span class="title">博文学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/postsLearning/collect/" class="nav-link">
  博文收集
</a></li><li class="dropdown-item"><!----> <a href="/postsLearning/2020/" class="nav-link">
  2020年
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端相关" class="dropdown-title"><span class="title">前端相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端相关" class="mobile-dropdown-title"><span class="title">前端相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS库相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe/nodejs/" class="nav-link router-link-active">
  Node.js
</a></li><li class="dropdown-subitem"><a href="/fe/vuejs/" class="nav-link">
  Vue.js
</a></li><li class="dropdown-subitem"><a href="/fe/reactjs/" class="nav-link">
  React.js
</a></li><li class="dropdown-subitem"><a href="/fe/reactjs/" class="nav-link">
  AJAX
</a></li><li class="dropdown-subitem"><a href="/fe/svgjs/" class="nav-link">
  SVG.js
</a></li></ul></li><li class="dropdown-item"><h4>
          框架相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe/nuxtjs/" class="nav-link">
  Nuxt框架
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/application/" class="nav-link">
  志愿填报建议
</a></li></ul></div></div><div class="nav-item"><a href="https://www.giriawsh.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人文章
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源码学习" class="dropdown-title"><span class="title">源码学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="源码学习" class="mobile-dropdown-title"><span class="title">源码学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/source/element/" class="nav-link">
  Element UI
</a></li><li class="dropdown-item"><!----> <a href="/source/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="书籍学习" class="dropdown-title"><span class="title">书籍学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="书籍学习" class="mobile-dropdown-title"><span class="title">书籍学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/books/theDefinitiveGuideToJavaScript/" class="nav-link">
  JavaScript权威指南
</a></li><li class="dropdown-item"><!----> <a href="/books/theNodeBeginnerBook/" class="nav-link">
  NodeJS入门
</a></li><li class="dropdown-item"><!----> <a href="/books/diveIntoNode/" class="nav-link">
  深入浅出Node.js
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法学习" class="dropdown-title"><span class="title">算法学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法学习" class="mobile-dropdown-title"><span class="title">算法学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/codingInterviews/" class="nav-link">
  剑指Offer系列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文学习" class="dropdown-title"><span class="title">博文学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文学习" class="mobile-dropdown-title"><span class="title">博文学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/postsLearning/collect/" class="nav-link">
  博文收集
</a></li><li class="dropdown-item"><!----> <a href="/postsLearning/2020/" class="nav-link">
  2020年
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端相关" class="dropdown-title"><span class="title">前端相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端相关" class="mobile-dropdown-title"><span class="title">前端相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS库相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe/nodejs/" class="nav-link router-link-active">
  Node.js
</a></li><li class="dropdown-subitem"><a href="/fe/vuejs/" class="nav-link">
  Vue.js
</a></li><li class="dropdown-subitem"><a href="/fe/reactjs/" class="nav-link">
  React.js
</a></li><li class="dropdown-subitem"><a href="/fe/reactjs/" class="nav-link">
  AJAX
</a></li><li class="dropdown-subitem"><a href="/fe/svgjs/" class="nav-link">
  SVG.js
</a></li></ul></li><li class="dropdown-item"><h4>
          框架相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe/nuxtjs/" class="nav-link">
  Nuxt框架
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/application/" class="nav-link">
  志愿填报建议
</a></li></ul></div></div><div class="nav-item"><a href="https://www.giriawsh.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人文章
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>NodeJS初学</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-hui-diao-han-shu-shi-jian-xun-huan-eventemitter.html" class="sidebar-link">1.回调函数、事件循环、EventEmitter</a></li><li><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-2-bufferstreammo-kuai-xi-tong.html" class="sidebar-link">2.Buffer、Stream、模块系统</a></li><li><a href="/fe/nodejs/start/nodejs.html" class="sidebar-link">3.函数、路由、全局对象</a></li><li><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-4-util-gong-ju-wen-jian-xi-tong-getpost-qing-qiu.html" class="sidebar-link">4.util工具、文件系统、GET/POST请求</a></li><li><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-5-ospathnetdnsdomainweb-mo-kuai.html" class="sidebar-link">5.OS/Path/Net/DNS/Domain/Web模块</a></li><li><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-6-express-kuang-jia-restful-api.html" class="sidebar-link">6.Express框架、RESTful API</a></li><li><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html" aria-current="page" class="active sidebar-link">7.多进程、MySQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html#多进程" class="sidebar-link">多进程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html#exec-方法" class="sidebar-link">exec() 方法</a></li><li class="sidebar-sub-header"><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html#spawn-方法" class="sidebar-link">spawn() 方法</a></li><li class="sidebar-sub-header"><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html#fork-方法" class="sidebar-link">fork 方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html#jxcore-打包" class="sidebar-link">JXcore 打包</a></li><li class="sidebar-sub-header"><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html#连接-mysql" class="sidebar-link">连接 MySQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html#安装驱动" class="sidebar-link">安装驱动</a></li><li class="sidebar-sub-header"><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html#连接数据库" class="sidebar-link">连接数据库</a></li><li class="sidebar-sub-header"><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html#数据库连接参数说明" class="sidebar-link">数据库连接参数说明：</a></li><li class="sidebar-sub-header"><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html#查询数据" class="sidebar-link">查询数据</a></li><li class="sidebar-sub-header"><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html#插入数据" class="sidebar-link">插入数据</a></li><li class="sidebar-sub-header"><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html#更新数据" class="sidebar-link">更新数据</a></li><li class="sidebar-sub-header"><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html#删除数据" class="sidebar-link">删除数据</a></li></ul></li><li class="sidebar-sub-header"><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html#连接-mongodb" class="sidebar-link">连接 MongoDB</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-7-duo-jin-cheng-mysql.html#安装驱动-2" class="sidebar-link">安装驱动</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>7天学会NodeJS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/nodejs/7daysLearningNodejs/lessless7-tian-xue-hui-nodejsgreatergreater-di-yi-tian-nodejs-ji-chu.html" class="sidebar-link">1. NodeJS基础</a></li><li><a href="/fe/nodejs/7daysLearningNodejs/lessless7-tian-xue-hui-nodejsgreatergreater-di-er-tian-dai-ma-zu-zhi-he-bu-shu.html" class="sidebar-link">2. 代码的组织和部署</a></li><li><a href="/fe/nodejs/7daysLearningNodejs/lessless7-tian-xue-hui-nodejsgreatergreater-di-san-tian-wen-jian-cao-zuo.html" class="sidebar-link">3. 文件操作</a></li><li><a href="/fe/nodejs/7daysLearningNodejs/lessless7-tian-xue-hui-nodejsgreatergreater-di-si-tian-wang-luo-cao-zuo.html" class="sidebar-link">4. 网络操作</a></li><li><a href="/fe/nodejs/7daysLearningNodejs/lessless7-tian-xue-hui-nodejsgreatergreater-di-wu-tian-jin-cheng-guan-li.html" class="sidebar-link">5. 进程管理</a></li><li><a href="/fe/nodejs/7daysLearningNodejs/lessless7-tian-xue-hui-nodejsgreatergreater-di-liu-tian-yi-bu-bian-cheng.html" class="sidebar-link">6. 异步编程</a></li><li><a href="/fe/nodejs/7daysLearningNodejs/lessless7-tian-xue-hui-nodejsgreatergreater-di-qi-tian-shi-li-shi-zhan.html" class="sidebar-link">7. 示例实战</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="多进程"><a href="#多进程" class="header-anchor">#</a> 多进程</h2> <p>我们都知道 Node.js 是以单线程的模式运行的，但它使用的是事件驱动来处理并发，这样有助于我们在多核 cpu 的系统上创建多个子进程，从而提高性能。</p> <p><u>每个子进程总是带有三个流对象：child.stdin, child.stdout 和child.stderr。他们可能会共享父进程的 stdio 流，或者也可以是独立的被导流的流对象。</u></p> <p>Node 提供了 child_process 模块来创建子进程，方法有：</p> <ul><li><strong>exec</strong> - child_process.exec 使用子进程执行命令，缓存子进程的输出，并将子进程的输出以回调函数参数的形式返回。</li> <li><strong>spawn</strong> - child_process.spawn 使用指定的命令行参数创建新进程。</li> <li><strong>fork</strong> - child_process.fork 是 spawn()的特殊形式，用于在子进程中运行的模块，如 fork('./son.js') 相当于 spawn('node', ['./son.js']) 。<u>与spawn方法不同的是，fork会在父进程与子进程之间，建立一个通信管道，用于进程之间的通信。</u></li></ul> <h3 id="exec-方法"><a href="#exec-方法" class="header-anchor">#</a> exec() 方法</h3> <p>child_process.exec 使用子进程执行命令，缓存子进程的输出，并将子进程的输出以回调函数参数的形式返回。</p> <p>语法如下所示：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>child_process<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>command<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="参数"><a href="#参数" class="header-anchor">#</a> 参数</h4> <p>参数说明如下：</p> <p><strong>command：</strong> 字符串， 将要运行的命令，参数使用空格隔开</p> <p><strong>options ：对象，可以是：</strong></p> <ul><li>cwd ，字符串，子进程的当前工作目录</li> <li>env，对象 环境变量键值对</li> <li>encoding ，字符串，字符编码（默认： 'utf8'）</li> <li>shell ，字符串，将要执行命令的 Shell（默认: 在 UNIX 中为<code>/bin/sh</code>， 在 Windows 中为<code>cmd.exe</code>， Shell 应当能识别 <code>-c</code>开关在 UNIX 中，或 <code>/s /c</code> 在 Windows 中。 在Windows 中，命令行解析应当能兼容<code>cmd.exe</code>）</li> <li>timeout，数字，超时时间（默认： 0）</li> <li>maxBuffer，数字， 在 stdout 或 stderr 中允许存在的最大缓冲（二进制），如果超出那么子进程将会被杀死 （默认: 200*1024）</li> <li>killSignal ，字符串，结束信号（默认：'SIGTERM'）</li> <li>uid，数字，设置用户进程的 ID</li> <li>gid，数字，设置进程组的 ID</li></ul> <p>**callback ：**回调函数，包含三个参数error, stdout 和 stderr。</p> <p><u>exec() 方法返回最大的缓冲区，并等待进程结束，一次性返回缓冲区的内容。</u></p> <h4 id="实例"><a href="#实例" class="header-anchor">#</a> 实例</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//support.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;进程 &quot;</span> <span class="token operator">+</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot; 执行。&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//master.js</span>
<span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> child_process <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;child_process&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> workerProcess <span class="token operator">=</span> child_process<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'node support.js '</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> stdout<span class="token punctuation">,</span> stderr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//这里注意command中有个空格，也就是说实际上会加上一个数字作为参数 eg:node support.js 1</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Error code:'</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Signal received:'</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>signal<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'stdout:'</span> <span class="token operator">+</span> stdout<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'stderr:'</span> <span class="token operator">+</span> stderr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    workerProcess<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'exit'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子进程已退出，退出码 '</span> <span class="token operator">+</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>执行以上代码，输出结果为：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>➜  multi-progress node master.js
子进程已退出，退出码 <span class="token number">0</span>
stdout:进程 <span class="token number">0</span> 执行。

stderr:
子进程已退出，退出码 <span class="token number">0</span>
stdout:进程 <span class="token number">1</span> 执行。

stderr:
子进程已退出，退出码 <span class="token number">0</span>
stdout:进程 <span class="token number">2</span> 执行。

stderr:
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="spawn-方法"><a href="#spawn-方法" class="header-anchor">#</a> spawn() 方法</h3> <p>child_process.spawn 使用指定的命令行参数创建新进程，语法格式如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>child_process<span class="token punctuation">.</span><span class="token function">spawn</span><span class="token punctuation">(</span>command<span class="token punctuation">[</span><span class="token punctuation">,</span> args<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="参数-2"><a href="#参数-2" class="header-anchor">#</a> 参数</h4> <p>参数说明如下：</p> <p><strong>command：</strong> 将要运行的命令</p> <p><strong>args：</strong> Array 字符串参数数组</p> <p><strong>options Object</strong></p> <ul><li>cwd String 子进程的当前工作目录</li> <li>env Object 环境变量键值对</li> <li>stdio Array|String 子进程的 stdio 配置</li> <li>detached Boolean 这个子进程将会变成进程组的领导</li> <li>uid Number 设置用户进程的 ID</li> <li>gid Number 设置进程组的 ID</li></ul> <p><u>spawn() 方法返回流 (stdout &amp; stderr)，在进程返回大量数据时使用。进程一旦开始执行时 spawn() 就开始接收响应。</u></p> <h4 id="实例-2"><a href="#实例-2" class="header-anchor">#</a> 实例</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//master.js</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> child_process <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'child_process'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> workerProcess <span class="token operator">=</span> child_process<span class="token punctuation">.</span><span class="token function">spawn</span><span class="token punctuation">(</span><span class="token string">'node'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'support.js'</span><span class="token punctuation">,</span> i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
   workerProcess<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'stdout: '</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
   workerProcess<span class="token punctuation">.</span>stderr<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'stderr: '</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
   workerProcess<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子进程已退出，退出码 '</span><span class="token operator">+</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>执行以上代码，输出结果为：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>➜  multi-progress node spawn.js
stdout:进程 <span class="token number">0</span> 执行。

stdout:进程 <span class="token number">1</span> 执行。

子进程已退出，退出码 <span class="token number">0</span>
stdout:进程 <span class="token number">2</span> 执行。

子进程已退出，退出码 <span class="token number">0</span>
子进程已退出，退出码 <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="fork-方法"><a href="#fork-方法" class="header-anchor">#</a> fork 方法</h3> <p>child_process.fork 是 spawn() 方法的特殊形式，用于创建进程，语法格式如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>child_process<span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>modulePath<span class="token punctuation">[</span><span class="token punctuation">,</span> args<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="参数-3"><a href="#参数-3" class="header-anchor">#</a> 参数</h4> <p>参数说明如下：</p> <p><strong>modulePath</strong>： String，将要在子进程中运行的模块</p> <p><strong>args</strong>： Array 字符串参数数组</p> <p><strong>options</strong>：Object</p> <ul><li>cwd String 子进程的当前工作目录</li> <li>env Object 环境变量键值对</li> <li>execPath String 创建子进程的可执行文件</li> <li>execArgv Array 子进程的可执行文件的字符串参数数组（默认： process.execArgv）</li> <li>silent Boolean 如果为<code>true</code>，子进程的<code>stdin</code>，<code>stdout</code>和<code>stderr</code>将会被关联至父进程，否则，它们将会从父进程中继承。（默认为：<code>false</code>）</li> <li>uid Number 设置用户进程的 ID</li> <li>gid Number 设置进程组的 ID</li></ul> <p><u>返回的对象除了拥有ChildProcess实例的所有方法，还有一个内建的通信信道。</u></p> <h4 id="实例-3"><a href="#实例-3" class="header-anchor">#</a> 实例</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//master.js</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> child_process <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'child_process'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> worker_process <span class="token operator">=</span> child_process<span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span><span class="token string">&quot;support.js&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
 
   worker_process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子进程已退出，退出码 '</span> <span class="token operator">+</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>执行以上代码，输出结果为：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>➜  multi-progress node fork.js
进程 <span class="token number">0</span> 执行。
进程 <span class="token number">1</span> 执行。
进程 <span class="token number">2</span> 执行。
子进程已退出，退出码 <span class="token number">0</span>
子进程已退出，退出码 <span class="token number">0</span>
子进程已退出，退出码 <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="jxcore-打包"><a href="#jxcore-打包" class="header-anchor">#</a> JXcore 打包</h2> <p>Node.js 是一个开放源代码、跨平台的、用于服务器端和网络应用的运行环境。</p> <p>JXcore 是一个支持多线程的 Node.js 发行版本，基本不需要对你现有的代码做任何改动就可以直接线程安全地以多线程运行。</p> <p>这块暂时好像没有用到，之后再学吧。</p> <h2 id="连接-mysql"><a href="#连接-mysql" class="header-anchor">#</a> 连接 MySQL</h2> <h3 id="安装驱动"><a href="#安装驱动" class="header-anchor">#</a> 安装驱动</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ <span class="token function">npm</span> <span class="token function">install</span> mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="连接数据库"><a href="#连接数据库" class="header-anchor">#</a> 连接数据库</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> mysql      <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mysql'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  host     <span class="token operator">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>
  user     <span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>
  password <span class="token operator">:</span> <span class="token string">'123456'</span><span class="token punctuation">,</span>
  database <span class="token operator">:</span> <span class="token string">'test'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">'SELECT 1 + 1 AS solution'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> results<span class="token punctuation">,</span> fields</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The solution is: '</span><span class="token punctuation">,</span> results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>solution<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>执行以下命令输出结果为：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ node test.js
The solution is: <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="数据库连接参数说明"><a href="#数据库连接参数说明" class="header-anchor">#</a> 数据库连接参数说明：</h3> <table><thead><tr><th style="text-align:left;">参数</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">host</td> <td style="text-align:left;">主机地址 （默认：localhost）</td></tr> <tr><td style="text-align:left;">user</td> <td style="text-align:left;">用户名</td></tr> <tr><td style="text-align:left;">password</td> <td style="text-align:left;">密码</td></tr> <tr><td style="text-align:left;">port</td> <td style="text-align:left;">端口号 （默认：3306）</td></tr> <tr><td style="text-align:left;">database</td> <td style="text-align:left;">数据库名</td></tr> <tr><td style="text-align:left;">charset</td> <td style="text-align:left;">连接字符集（默认：'UTF8_GENERAL_CI'，注意字符集的字母都要大写）</td></tr> <tr><td style="text-align:left;">localAddress</td> <td style="text-align:left;">此IP用于TCP连接（可选）</td></tr> <tr><td style="text-align:left;">socketPath</td> <td style="text-align:left;">连接到unix域路径，当使用 host 和 port 时会被忽略</td></tr> <tr><td style="text-align:left;">timezone</td> <td style="text-align:left;">时区（默认：'local'）</td></tr> <tr><td style="text-align:left;">connectTimeout</td> <td style="text-align:left;">连接超时（默认：不限制；单位：毫秒）</td></tr> <tr><td style="text-align:left;">stringifyObjects</td> <td style="text-align:left;">是否序列化对象</td></tr> <tr><td style="text-align:left;">typeCast</td> <td style="text-align:left;">是否将列值转化为本地JavaScript类型值 （默认：true）</td></tr> <tr><td style="text-align:left;">queryFormat</td> <td style="text-align:left;">自定义query语句格式化方法</td></tr> <tr><td style="text-align:left;">supportBigNumbers</td> <td style="text-align:left;">数据库支持bigint或decimal类型列时，需要设此option为true （默认：false）</td></tr> <tr><td style="text-align:left;">bigNumberStrings</td> <td style="text-align:left;">supportBigNumbers和bigNumberStrings启用 强制bigint或decimal列以JavaScript字符串类型返回（默认：false）</td></tr> <tr><td style="text-align:left;">dateStrings</td> <td style="text-align:left;">强制timestamp,datetime,data类型以字符串类型返回，而不是JavaScript Date类型（默认：false）</td></tr> <tr><td style="text-align:left;">debug</td> <td style="text-align:left;">开启调试（默认：false）</td></tr> <tr><td style="text-align:left;">multipleStatements</td> <td style="text-align:left;">是否许一个query中有多个MySQL语句 （默认：false）</td></tr> <tr><td style="text-align:left;">flags</td> <td style="text-align:left;">用于修改连接标志</td></tr> <tr><td style="text-align:left;">ssl</td> <td style="text-align:left;">使用ssl参数（与crypto.createCredenitals参数格式一至）或一个包含ssl配置文件名称的字符串，目前只捆绑Amazon RDS的配置文件</td></tr></tbody></table> <h3 id="查询数据"><a href="#查询数据" class="header-anchor">#</a> 查询数据</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> mysql  <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mysql'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
 
<span class="token keyword">var</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>     
  host     <span class="token operator">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>       
  user     <span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>              
  password <span class="token operator">:</span> <span class="token string">'123456'</span><span class="token punctuation">,</span>       
  port<span class="token operator">:</span> <span class="token string">'3306'</span><span class="token punctuation">,</span>                   
  database<span class="token operator">:</span> <span class="token string">'test'</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">var</span>  sql <span class="token operator">=</span> <span class="token string">'SELECT * FROM websites'</span><span class="token punctuation">;</span>
<span class="token comment">//查</span>
connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[SELECT ERROR] - '</span><span class="token punctuation">,</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'--------------------------SELECT----------------------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'------------------------------------------------------------\n\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
connection<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>执行以下命令输出就结果为：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ node test.js
--------------------------SELECT----------------------------
<span class="token punctuation">[</span> RowDataPacket <span class="token punctuation">{</span>
    id: <span class="token number">1</span>,
    name: <span class="token string">'Google'</span>,
    url: <span class="token string">'https://www.google.cm/'</span>,
    alexa: <span class="token number">1</span>,
    country: <span class="token string">'USA'</span> <span class="token punctuation">}</span>,
  RowDataPacket <span class="token punctuation">{</span>
    id: <span class="token number">2</span>,
    name: <span class="token string">'淘宝'</span>,
    url: <span class="token string">'https://www.taobao.com/'</span>,
    alexa: <span class="token number">13</span>,
    country: <span class="token string">'CN'</span> <span class="token punctuation">}</span>,
  RowDataPacket <span class="token punctuation">{</span>
    id: <span class="token number">3</span>,
    name: <span class="token string">'菜鸟教程'</span>,
    url: <span class="token string">'http://www.runoob.com/'</span>,
    alexa: <span class="token number">4689</span>,
    country: <span class="token string">'CN'</span> <span class="token punctuation">}</span>,
  RowDataPacket <span class="token punctuation">{</span>
    id: <span class="token number">4</span>,
    name: <span class="token string">'微博'</span>,
    url: <span class="token string">'http://weibo.com/'</span>,
    alexa: <span class="token number">20</span>,
    country: <span class="token string">'CN'</span> <span class="token punctuation">}</span>,
  RowDataPacket <span class="token punctuation">{</span>
    id: <span class="token number">5</span>,
    name: <span class="token string">'Facebook'</span>,
    url: <span class="token string">'https://www.facebook.com/'</span>,
    alexa: <span class="token number">3</span>,
    country: <span class="token string">'USA'</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span>
------------------------------------------------------------
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="插入数据"><a href="#插入数据" class="header-anchor">#</a> 插入数据</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> mysql  <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mysql'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
 
<span class="token keyword">var</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>     
  host     <span class="token operator">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>       
  user     <span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>              
  password <span class="token operator">:</span> <span class="token string">'123456'</span><span class="token punctuation">,</span>       
  port<span class="token operator">:</span> <span class="token string">'3306'</span><span class="token punctuation">,</span>                   
  database<span class="token operator">:</span> <span class="token string">'test'</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">var</span>  addSql <span class="token operator">=</span> <span class="token string">'INSERT INTO websites(Id,name,url,alexa,country) VALUES(0,?,?,?,?)'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span>  addSqlParams <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'菜鸟工具'</span><span class="token punctuation">,</span> <span class="token string">'https://c.runoob.com'</span><span class="token punctuation">,</span><span class="token string">'23453'</span><span class="token punctuation">,</span> <span class="token string">'CN'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//增</span>
connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>addSql<span class="token punctuation">,</span>addSqlParams<span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[INSERT ERROR] - '</span><span class="token punctuation">,</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>        
 
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'--------------------------INSERT----------------------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token comment">//console.log('INSERT ID:',result.insertId);        </span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'INSERT ID:'</span><span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>        
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'-----------------------------------------------------------------\n\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
connection<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>执行以下命令输出就结果为：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ node test.js
--------------------------INSERT----------------------------
INSERT ID: OkPacket <span class="token punctuation">{</span>
  fieldCount: <span class="token number">0</span>,
  affectedRows: <span class="token number">1</span>,
  insertId: <span class="token number">6</span>,
  serverStatus: <span class="token number">2</span>,
  warningCount: <span class="token number">0</span>,
  message: <span class="token string">''</span>,
  protocol41: true,
  changedRows: <span class="token number">0</span> <span class="token punctuation">}</span>
-----------------------------------------------------------------
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="更新数据"><a href="#更新数据" class="header-anchor">#</a> 更新数据</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> mysql  <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mysql'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
 
<span class="token keyword">var</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>     
  host     <span class="token operator">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>       
  user     <span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>              
  password <span class="token operator">:</span> <span class="token string">'123456'</span><span class="token punctuation">,</span>       
  port<span class="token operator">:</span> <span class="token string">'3306'</span><span class="token punctuation">,</span>                   
  database<span class="token operator">:</span> <span class="token string">'test'</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">var</span> modSql <span class="token operator">=</span> <span class="token string">'UPDATE websites SET name = ?,url = ? WHERE Id = ?'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> modSqlParams <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'菜鸟移动站'</span><span class="token punctuation">,</span> <span class="token string">'https://m.runoob.com'</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//改</span>
connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>modSql<span class="token punctuation">,</span>modSqlParams<span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[UPDATE ERROR] - '</span><span class="token punctuation">,</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">return</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>        
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'--------------------------UPDATE----------------------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'UPDATE affectedRows'</span><span class="token punctuation">,</span>result<span class="token punctuation">.</span>affectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'-----------------------------------------------------------------\n\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
connection<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>执行以下命令输出就结果为：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>--------------------------UPDATE----------------------------
UPDATE affectedRows <span class="token number">1</span>
-----------------------------------------------------------------
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="删除数据"><a href="#删除数据" class="header-anchor">#</a> 删除数据</h3> <p>我们可以使用以下代码来删除 id 为 6 的数据:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> mysql  <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mysql'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
 
<span class="token keyword">var</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>     
  host     <span class="token operator">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>       
  user     <span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>              
  password <span class="token operator">:</span> <span class="token string">'123456'</span><span class="token punctuation">,</span>       
  port<span class="token operator">:</span> <span class="token string">'3306'</span><span class="token punctuation">,</span>                   
  database<span class="token operator">:</span> <span class="token string">'test'</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">var</span> delSql <span class="token operator">=</span> <span class="token string">'DELETE FROM websites where id=6'</span><span class="token punctuation">;</span>
<span class="token comment">//删</span>
connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>delSql<span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[DELETE ERROR] - '</span><span class="token punctuation">,</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>        
 
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'--------------------------DELETE----------------------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'DELETE affectedRows'</span><span class="token punctuation">,</span>result<span class="token punctuation">.</span>affectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'-----------------------------------------------------------------\n\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
connection<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>执行以下命令输出就结果为：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>--------------------------DELETE----------------------------
DELETE affectedRows <span class="token number">1</span>
-----------------------------------------------------------------
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>更多MySQL语法见这：<a href="http://www.mysqlab.net/docs/view/refman-5.1-zh/chapter/sql-syntax.html" target="_blank" rel="noopener noreferrer">MySQL中文参考手册<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="连接-mongodb"><a href="#连接-mongodb" class="header-anchor">#</a> 连接 MongoDB</h2> <p>MongoDB是一种文档导向数据库管理系统，由C++撰写而成。</p> <h3 id="安装驱动-2"><a href="#安装驱动-2" class="header-anchor">#</a> 安装驱动</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ <span class="token function">npm</span> <span class="token function">install</span> mongodb
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>有关NoSQL数据库的内容（毕竟架构类型和Mysql不大一样）日后学习了再补充这块吧。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/fe/nodejs/start/nodejs-chu-xue-xi-lie-6-express-kuang-jia-restful-api.html" class="prev">
        6.Express框架、RESTful API
      </a></span> <span class="next"><a href="/fe/nodejs/7daysLearningNodejs/lessless7-tian-xue-hui-nodejsgreatergreater-di-yi-tian-nodejs-ji-chu.html">
        1. NodeJS基础
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d811c258.js" defer></script><script src="/assets/js/2.b0d06978.js" defer></script><script src="/assets/js/50.b2344657.js" defer></script>
  </body>
</html>
