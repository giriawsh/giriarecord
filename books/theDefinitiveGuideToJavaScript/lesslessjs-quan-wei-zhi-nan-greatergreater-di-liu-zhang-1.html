<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第六章1 | Girecord</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/pencil.png">
    <meta name="description" content="Giria的学习记录">
    <link rel="preload" href="/assets/css/0.styles.a748b10c.css" as="style"><link rel="preload" href="/assets/js/app.d811c258.js" as="script"><link rel="preload" href="/assets/js/2.b0d06978.js" as="script"><link rel="preload" href="/assets/js/21.1b73581a.js" as="script"><link rel="prefetch" href="/assets/js/10.c058f302.js"><link rel="prefetch" href="/assets/js/11.8dd384d0.js"><link rel="prefetch" href="/assets/js/12.a57db71e.js"><link rel="prefetch" href="/assets/js/13.ba28784c.js"><link rel="prefetch" href="/assets/js/14.c932930e.js"><link rel="prefetch" href="/assets/js/15.214d63a1.js"><link rel="prefetch" href="/assets/js/16.d7b01f05.js"><link rel="prefetch" href="/assets/js/17.d86602f8.js"><link rel="prefetch" href="/assets/js/18.9f5cd19a.js"><link rel="prefetch" href="/assets/js/19.7fd1e862.js"><link rel="prefetch" href="/assets/js/20.d65b214c.js"><link rel="prefetch" href="/assets/js/22.a1991fce.js"><link rel="prefetch" href="/assets/js/23.86ad9e68.js"><link rel="prefetch" href="/assets/js/24.65381257.js"><link rel="prefetch" href="/assets/js/25.7bd935b2.js"><link rel="prefetch" href="/assets/js/26.32e3f54b.js"><link rel="prefetch" href="/assets/js/27.4b8a459a.js"><link rel="prefetch" href="/assets/js/28.8fbb372e.js"><link rel="prefetch" href="/assets/js/29.14d35dd5.js"><link rel="prefetch" href="/assets/js/3.2e07bdbd.js"><link rel="prefetch" href="/assets/js/30.836a9de2.js"><link rel="prefetch" href="/assets/js/31.557cf90d.js"><link rel="prefetch" href="/assets/js/32.9cb9ce1c.js"><link rel="prefetch" href="/assets/js/33.75bed696.js"><link rel="prefetch" href="/assets/js/34.62b0841c.js"><link rel="prefetch" href="/assets/js/35.ddeecc7e.js"><link rel="prefetch" href="/assets/js/36.dda463c4.js"><link rel="prefetch" href="/assets/js/37.16b89d36.js"><link rel="prefetch" href="/assets/js/38.b10e01fe.js"><link rel="prefetch" href="/assets/js/39.0c104c50.js"><link rel="prefetch" href="/assets/js/4.35c41ba6.js"><link rel="prefetch" href="/assets/js/40.f0cb89f5.js"><link rel="prefetch" href="/assets/js/41.480570b4.js"><link rel="prefetch" href="/assets/js/42.08b42bef.js"><link rel="prefetch" href="/assets/js/43.8d61e275.js"><link rel="prefetch" href="/assets/js/44.b8e43077.js"><link rel="prefetch" href="/assets/js/45.54d487f1.js"><link rel="prefetch" href="/assets/js/46.5a382eae.js"><link rel="prefetch" href="/assets/js/47.1f8796a9.js"><link rel="prefetch" href="/assets/js/48.8d46e23a.js"><link rel="prefetch" href="/assets/js/49.72b8ca20.js"><link rel="prefetch" href="/assets/js/5.7b10027c.js"><link rel="prefetch" href="/assets/js/50.b2344657.js"><link rel="prefetch" href="/assets/js/51.080a56f5.js"><link rel="prefetch" href="/assets/js/52.bad7a065.js"><link rel="prefetch" href="/assets/js/53.ad9bdcfd.js"><link rel="prefetch" href="/assets/js/54.6770d917.js"><link rel="prefetch" href="/assets/js/55.c0172ecd.js"><link rel="prefetch" href="/assets/js/56.49c919d4.js"><link rel="prefetch" href="/assets/js/57.1767b53b.js"><link rel="prefetch" href="/assets/js/58.41eeaa28.js"><link rel="prefetch" href="/assets/js/59.64f20b7f.js"><link rel="prefetch" href="/assets/js/6.5964ef22.js"><link rel="prefetch" href="/assets/js/60.0f75477a.js"><link rel="prefetch" href="/assets/js/61.4be6c4a4.js"><link rel="prefetch" href="/assets/js/62.e5d06d6d.js"><link rel="prefetch" href="/assets/js/63.955d4114.js"><link rel="prefetch" href="/assets/js/64.d3e90038.js"><link rel="prefetch" href="/assets/js/65.e8997251.js"><link rel="prefetch" href="/assets/js/66.e43a4e42.js"><link rel="prefetch" href="/assets/js/67.178746ff.js"><link rel="prefetch" href="/assets/js/68.8b74209e.js"><link rel="prefetch" href="/assets/js/69.cd787813.js"><link rel="prefetch" href="/assets/js/7.a1320352.js"><link rel="prefetch" href="/assets/js/70.51f9e21c.js"><link rel="prefetch" href="/assets/js/71.e52c53ad.js"><link rel="prefetch" href="/assets/js/72.48ee5f30.js"><link rel="prefetch" href="/assets/js/73.d271fa49.js"><link rel="prefetch" href="/assets/js/74.a6baf45f.js"><link rel="prefetch" href="/assets/js/75.096cf42e.js"><link rel="prefetch" href="/assets/js/76.a2318a27.js"><link rel="prefetch" href="/assets/js/8.6a3c595d.js"><link rel="prefetch" href="/assets/js/9.586c950f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a748b10c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Girecord</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源码学习" class="dropdown-title"><span class="title">源码学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="源码学习" class="mobile-dropdown-title"><span class="title">源码学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/source/element/" class="nav-link">
  Element UI
</a></li><li class="dropdown-item"><!----> <a href="/source/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="书籍学习" class="dropdown-title"><span class="title">书籍学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="书籍学习" class="mobile-dropdown-title"><span class="title">书籍学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/books/theDefinitiveGuideToJavaScript/" class="nav-link router-link-active">
  JavaScript权威指南
</a></li><li class="dropdown-item"><!----> <a href="/books/theNodeBeginnerBook/" class="nav-link">
  NodeJS入门
</a></li><li class="dropdown-item"><!----> <a href="/books/diveIntoNode/" class="nav-link">
  深入浅出Node.js
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法学习" class="dropdown-title"><span class="title">算法学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法学习" class="mobile-dropdown-title"><span class="title">算法学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/codingInterviews/" class="nav-link">
  剑指Offer系列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文学习" class="dropdown-title"><span class="title">博文学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文学习" class="mobile-dropdown-title"><span class="title">博文学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/postsLearning/collect/" class="nav-link">
  博文收集
</a></li><li class="dropdown-item"><!----> <a href="/postsLearning/2020/" class="nav-link">
  2020年
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端相关" class="dropdown-title"><span class="title">前端相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端相关" class="mobile-dropdown-title"><span class="title">前端相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS库相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe/nodejs/" class="nav-link">
  Node.js
</a></li><li class="dropdown-subitem"><a href="/fe/vuejs/" class="nav-link">
  Vue.js
</a></li><li class="dropdown-subitem"><a href="/fe/reactjs/" class="nav-link">
  React.js
</a></li><li class="dropdown-subitem"><a href="/fe/reactjs/" class="nav-link">
  AJAX
</a></li><li class="dropdown-subitem"><a href="/fe/svgjs/" class="nav-link">
  SVG.js
</a></li></ul></li><li class="dropdown-item"><h4>
          框架相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe/nuxtjs/" class="nav-link">
  Nuxt框架
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/application/" class="nav-link">
  志愿填报建议
</a></li></ul></div></div><div class="nav-item"><a href="https://www.giriawsh.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人文章
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源码学习" class="dropdown-title"><span class="title">源码学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="源码学习" class="mobile-dropdown-title"><span class="title">源码学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/source/element/" class="nav-link">
  Element UI
</a></li><li class="dropdown-item"><!----> <a href="/source/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="书籍学习" class="dropdown-title"><span class="title">书籍学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="书籍学习" class="mobile-dropdown-title"><span class="title">书籍学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/books/theDefinitiveGuideToJavaScript/" class="nav-link router-link-active">
  JavaScript权威指南
</a></li><li class="dropdown-item"><!----> <a href="/books/theNodeBeginnerBook/" class="nav-link">
  NodeJS入门
</a></li><li class="dropdown-item"><!----> <a href="/books/diveIntoNode/" class="nav-link">
  深入浅出Node.js
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法学习" class="dropdown-title"><span class="title">算法学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法学习" class="mobile-dropdown-title"><span class="title">算法学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/codingInterviews/" class="nav-link">
  剑指Offer系列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文学习" class="dropdown-title"><span class="title">博文学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文学习" class="mobile-dropdown-title"><span class="title">博文学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/postsLearning/collect/" class="nav-link">
  博文收集
</a></li><li class="dropdown-item"><!----> <a href="/postsLearning/2020/" class="nav-link">
  2020年
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端相关" class="dropdown-title"><span class="title">前端相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端相关" class="mobile-dropdown-title"><span class="title">前端相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS库相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe/nodejs/" class="nav-link">
  Node.js
</a></li><li class="dropdown-subitem"><a href="/fe/vuejs/" class="nav-link">
  Vue.js
</a></li><li class="dropdown-subitem"><a href="/fe/reactjs/" class="nav-link">
  React.js
</a></li><li class="dropdown-subitem"><a href="/fe/reactjs/" class="nav-link">
  AJAX
</a></li><li class="dropdown-subitem"><a href="/fe/svgjs/" class="nav-link">
  SVG.js
</a></li></ul></li><li class="dropdown-item"><h4>
          框架相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe/nuxtjs/" class="nav-link">
  Nuxt框架
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/application/" class="nav-link">
  志愿填报建议
</a></li></ul></div></div><div class="nav-item"><a href="https://www.giriawsh.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人文章
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript权威指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-er-zhang-ci-fa-jie-gou.html" class="sidebar-link">第二章</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-san-zhang-shu-ju-lei-xing-shu-zi-wen-ben.html" class="sidebar-link">第三章1</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-san-zhang-2.html" class="sidebar-link">第三章2</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-san-zhang-3-bian-liang-sheng-ming-bian-liang-zuo-yong-yu.html" class="sidebar-link">第三章3</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-si-zhang-1.html" class="sidebar-link">第四章1</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-si-zhang-2.html" class="sidebar-link">第四章2</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-si-zhang-3.html" class="sidebar-link">第四章3</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-wu-zhang.html" class="sidebar-link">第五章-语句</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html" aria-current="page" class="active sidebar-link">第六章1</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#创建对象" class="sidebar-link">创建对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#对象直接量" class="sidebar-link">对象直接量</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#通过new创建对象" class="sidebar-link">通过new创建对象</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#原型" class="sidebar-link">原型</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#object-create" class="sidebar-link">Object.create()</a></li></ul></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#属性的查询和设置" class="sidebar-link">属性的查询和设置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#作为关联数组的对象" class="sidebar-link">作为关联数组的对象</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#继承" class="sidebar-link">继承</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#属性访问错误" class="sidebar-link">属性访问错误</a></li></ul></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#删除属性" class="sidebar-link">删除属性</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#检测属性" class="sidebar-link">检测属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#in运算符" class="sidebar-link">in运算符</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#hasownproperty" class="sidebar-link">hasOwnProperty()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#propertyisenumerable" class="sidebar-link">propertyIsEnumerable()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#使用-运算符" class="sidebar-link">使用!==运算符</a></li></ul></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#枚举属性" class="sidebar-link">枚举属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#for-in循环" class="sidebar-link">for/in循环</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#object-keys" class="sidebar-link">Object.keys()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#object-getownpropertynames" class="sidebar-link">Object.getOwnPropertyNames()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#小结" class="sidebar-link">小结</a></li></ul></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html#属性getter和setter" class="sidebar-link">属性getter和setter</a></li></ul></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-2.html" class="sidebar-link">第六章2</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-1.html" class="sidebar-link">第七章1</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html" class="sidebar-link">第七章2</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第六章-对象"><a href="#第六章-对象" class="header-anchor">#</a> 第六章 对象</h1> <p>对象是一种复合值：它将很多值（原始值或者其他对象）聚合在一起，可通过名字访问这些值。</p> <p>对象也可看做是属性的无序集合，每个属性都是一个名/值对。</p> <p>属性名是<strong>字符串</strong>，因而我们也可以把对象看成是从字符串到值的映射。</p> <div class="custom-block tip"><p class="custom-block-title">对象别名</p> <p>这种基本数据结构还有很多中叫法：散列、散列表、字典、关联数组</p></div> <p>然而对象不仅仅是字符串到值的映射，除了可以保持自有的属性，JS还可以从一个称为<strong>原型</strong>的对象继承属性。<u>对象的方法通常是继承的属性。</u></p> <p>这种“原型式继承”是JS的核心特征。</p> <p>JS对象是动态的——可以新增属性也可以删除属性，它们常用来模拟静态对象以及静态类型语言中的“结构体”。有时它们也用作字符串的集合（忽略名/值中的值）。</p> <p>对象是可变的，我们通过<strong>引用</strong>而非值来操作对象。</p> <p>对象最常见的用法是创建、设置、查找、删除、检测和枚举它的属性。下文要讲到的相当一部分内容来自ES5。</p> <h3 id="属性"><a href="#属性" class="header-anchor">#</a> 属性</h3> <p>属性包括<strong>名字</strong>和<strong>值</strong>。</p> <p>属性名：可以是包含空字符串在内的任意字符串，但对象中不能存在两个同名属性。</p> <p>值：可以是任意JS值，或者（在ES5中）可以是一个getter或setter函数。</p> <p>除了名字和值之外，每个属性还有一些与之相关的值，称为<strong>属性特性</strong>。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201108163113.png" alt="image-20201108163106281"></p> <p>在ES5之前，通过代码给对象创建的所有属性都是可写的、可枚举的、可配置的。</p> <p>在ES5中则可以对这些特性加以配置。</p> <p>除了包含属性之外，每个对象还拥有三个相关的<strong>对象特性</strong>：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201108163517.png" alt="image-20201108163516969"></p> <p>在第四章中我们有提到内置对象、宿主对象、原生对象的定义和区别，在本章中罗列了下面这些术语来对三类JS对象和两类属性作区分：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201108163851.png" alt="image-20201108163851273"></p> <h2 id="创建对象"><a href="#创建对象" class="header-anchor">#</a> 创建对象</h2> <p>可以通过**对象直接量、关键字new和ES5中的Object.create()**函数来创建对象。</p> <h3 id="对象直接量"><a href="#对象直接量" class="header-anchor">#</a> 对象直接量</h3> <p>这是创建对象最简单的方式。对象直接量是由若干名/值对组成的映射表。</p> <p>属性名可以是JS标识符也可以是字符串直接量（包括空字符串）。</p> <p>属性值可移植任意类型的JS表达式，表达式的值就是这个属性的值。</p> <p>例如(注意仔细看注释)：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201108165536.png" alt="image-20201108165536515"></p> <p>可以看到如果没有特殊情况，带不带引号都通用，且在解析时会被视作同一个属性名，可看下面这个例子中的x由于同名被覆盖了：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201108170120.png" alt="image-20201108170120160"></p> <p>在ES5中，<u>保留字可以用做不带引号的属性名</u>。</p> <p>然而对于ES3来说，使用保留字作为属性名必须使用引号引起来。</p> <p>在ES5中，对象直接量中的<u>最后一个属性后的逗号将忽略</u>，且在ES3的大部分实现中也可以忽略这个逗号。但在IE中则报错。</p> <p>对象直接量是一个表达式，这个表达式的每次运算都创建并初始化一个新的对象。</p> <p>每次计算对象直接量的时候，也会计算它的每个属性的值。</p> <p>也就是说，如果在一个重复调用的函数中的循环体内使用了对象直接量，<strong>它将创建很多对象</strong>，并且每次创建的对象的属性值也有可能不同。</p> <h3 id="通过new创建对象"><a href="#通过new创建对象" class="header-anchor">#</a> 通过new创建对象</h3> <p>关键字new后跟随一个函数调用，这样的函数称作<strong>构造函数</strong>（constructor）。</p> <p>构造函数用以初始化一个新创建的对象，JS语言核心中的原始函数都包含内置构造函数，例如：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201108170359.png" alt="image-20201108170359850"></p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201108170406.png" alt="image-20201108170406385"></p> <p>除了这些内置构造函数，用自定义构造函数来初始化新对象也是非常常见的。</p> <h3 id="原型"><a href="#原型" class="header-anchor">#</a> 原型</h3> <p>首先解释一下原型：每一个JS对象（null除外）都和另一个对象（即是原型）相关联，每一个对象都从原型继承属性。</p> <ol><li>所有通过<strong>对象直接量</strong>创建的对象都具有同一个原型对象，并可以通过<code>Object.prototype</code>获得对原型对象的引用。</li> <li>通过<strong>关键字new和构造函数调用</strong>创建的对象的原型就是构造函数的<code>prototype</code>属性的值。
<ol><li>因此，同使用<code>var empty = {}</code>创建对象一样，通过<code>new Object()</code>创建的对象也继承自<code>Object.prototype</code></li> <li>同样，通过<code>new Array()</code>创建的对象的原型就是<code>Array.prototype</code></li> <li>通过<code>new Date()</code>创建的对象的原型就是<code>Date.prototype</code></li></ol></li></ol> <p>没有原型的对象为数不多，<code>Object.prototype</code>就是其中之一（还有使用<code>Object.create(null)</code>创建的对象），它不继承任何属性。</p> <p>其他原型对象都是普通对象，普通对象都具有原型。</p> <p><strong>所有值的构造函数（以及大部分自定义的构造函数）都具有一个继承自<code>Object.prototype</code>的原型。</strong></p> <p>例如：<code>Date.prototype</code>的属性继承自<code>Object.prototype</code>，因此由new Date()创建的Date对象的属性<strong>同时继承</strong>自<code>Date.prototype</code>和<code>Object.prototype</code>。</p> <p>这一系列链接的原型对象就是所谓的“<strong>原型链</strong>”（prototype chain）。</p> <h3 id="object-create"><a href="#object-create" class="header-anchor">#</a> Object.create()</h3> <p>ES5定义了此方法，它创建一个新对象，其中<strong>第一个参数就是这个对象的原型</strong>。Object.create()提供第二个可选参数，用以对对象的属性进行进一步描述，后面将会提到。</p> <p><code>Object.create()</code>是一个<u>静态函数</u>，而不是提供给某个对象调用的方法。使用时，只需<u>传入所需的原型对象</u>即可。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> o1 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> y<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{x:1, y:2}就是传入的o1的原型，o1继承了属性x和y</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>可以通过传入参数null来创建一个没有原型的新对象</strong>。但通过这种方式创建的对象不会继承任何东西，甚至不包括基础方法，比如toString()。</p> <blockquote><p>也就是说，它将不能和“+”运算符一起正常工作</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> o2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//o2不继承任何属性和方法</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果想创建一个<strong>普通的空对象</strong>（比如通过{}和new Object()创建的对象），需要传入Object.prototype：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> o3 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//与{}和new Object()一样</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以通过任意原型创建新对象（换句话说，可以使任意对象可继承），这是一个非常强大的属性。在ES3中可以用类似下面的代码来模拟原型继承：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201108174319.png" alt="image-20201108174319280"></p> <p>可以看到inherit()函数返回的新对象继承了参数对象的属性值。</p> <div class="custom-block warning"><p class="custom-block-title">inherit()并不能完全代替Object.create()</p> <ol><li>它不能传入null原型来创建对象</li> <li>它不能接收可选的第二个参数</li></ol></div> <p>inherit()函数的其中一个用途就是<u>防止库函数无意间（非恶意地）修改那些不受你控制的对象</u>。</p> <p>不是将对象直接作为参数传入函数，而是将它的继承对象传入函数。当函数读取继承对象的属性时，实际上读取的是继承来的值。</p> <p>如果给继承对象的属性赋值，这些属性只会影响这个继承对象自身，而不是原始对象：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201108174610.png" alt="image-20201108174610290"></p> <h2 id="属性的查询和设置"><a href="#属性的查询和设置" class="header-anchor">#</a> 属性的查询和设置</h2> <p>第四章提到，可以通过点或方括号运算符来获取属性的值。</p> <p>运算符左侧应当是一个表达式，它返回一个对象。</p> <p>对于点来说，右侧必须是一个<u>以属性名称命名的简单标识符</u>。</p> <p>对于方括号来说，方括号内必须是一个计算结果为字符串的表达式，这个字符串就是属性的名字：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201108174821.png" alt="image-20201108174821041"></p> <p>通过点和方括号也可以创建属性或给属性赋值，需要将它们放在赋值表达式的左侧：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201108174848.png" alt="image-20201108174848599"></p> <p>在ES3中，点运算符后的标识符不能是保留字（ES5中可以，因为标识符作为名字可以不带引号）。</p> <p>如果一个对象的属性名是保留字，必须使用方括号形式访问它们。</p> <p>使用方括号时，更严格地讲，表达式必须<strong>返回字符串或一个可以转换为字符串的值</strong>。</p> <p>在第七章的例子中方括号内使用了数字，这情况是非常常见的。</p> <h3 id="作为关联数组的对象"><a href="#作为关联数组的对象" class="header-anchor">#</a> 作为关联数组的对象</h3> <p>上文提到，这两个表达式的值相同：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>object<span class="token punctuation">.</span>property
object<span class="token punctuation">[</span><span class="token string">&quot;property&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>第一种语法使用点运算符和一个标识符，这和C和Java中访问一个结构体或对象的静态字段非常类似。</p> <p>第二种语法使用方括号和一个字符串，看起来<u>更像数组</u>。只是这个数组元素是通过字符串索引而不是数字索引。</p> <p>这种数组就是<strong>关联数组</strong>，也称作散列、映射或字典。</p> <p>JS对象都是关联数组。</p> <div class="custom-block tip"><p class="custom-block-title">强类型与弱类型</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201108175813.png" alt="image-20201108175813576"></p></div> <p>在C、C++、Java和一些强类型语言中，对象只能<u>拥有固定数目的属性</u>，并且这些属性名称必须提前定义好。</p> <p>JS是弱类型语言，在任何对象中程序都可以<u>创建任意数量的属性</u>。</p> <blockquote><p>这里的意思是可以动态地给对象添加属性，严格讲JS对象的属性个数还是有上限滴。</p></blockquote> <p>但当通过点运算符访问对象的属性时，属性名用一个标识符来标识。标识符必须直接出现在JS程序中，<u>它们不是数据类型</u>，因此程序无法修改它们。</p> <blockquote><p>这里的意思是说，程序运行时无法动态地指定一个标识符，eval除外。</p> <p>即**[] 可以动态访问的属性名，可以在程序运行时创建和修改属性，点操作符就不行！**</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> customer<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> addr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'北京'</span><span class="token punctuation">,</span><span class="token string">'上海'</span><span class="token punctuation">,</span><span class="token string">'广州'</span><span class="token punctuation">,</span><span class="token string">'深圳'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 customer<span class="token punctuation">[</span><span class="token string">&quot;address&quot;</span><span class="token operator">+</span>i<span class="token punctuation">]</span><span class="token operator">=</span>addr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>customer<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
 <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 str <span class="token operator">+=</span> customer<span class="token punctuation">[</span><span class="token string">&quot;address&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></blockquote> <p>反过来讲，当通过<code>[]</code>来访问对象的属性时，属性名通过字符串来表示。字符串是JS的数据类型，在程序运行时可以修改和创建它们。</p> <p>这篇博文总结得很好：<a href="https://blog.csdn.net/weixin_41796631/article/details/89339273" target="_blank" rel="noopener noreferrer">js 对象属性通过点(.) 和 方括号 ( [] ) 的不同之处：obj.attr 和 obj[attr]<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>使用数组写法和用字符串表达式来访问对象属性具有更高的灵活性。</p> <p>因为使用<code>[]</code>时，字符串值是<strong>动态</strong>的，可以在运行时更改；标识符是<strong>静态</strong>的，必须写死在程序中作为索引对属性进行访问。</p> <h3 id="继承"><a href="#继承" class="header-anchor">#</a> 继承</h3> <p>JS对象具有“自有属性”，也有一些属性是从原型对象继承而来的。</p> <p>假设要查询对象o的属性x：</p> <ol><li>如果o中不存在x，那么将会继续在o的原型对象中查询属性x</li> <li>如果原型对象中也没有x，但这个原型对象也有原型，那么继续在这个原型对象的原型上执行查询</li> <li>直到找到x或者找到一个原型式null的对象位置。</li></ol> <p>对象的原型属性构成了一个“链”，通过这个原型链可以实现属性的继承。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109143256.png" alt="image-20201109143256273"></p> <p>假设给对象o的属性x赋值：</p> <ol><li>如果o中已经有属性x（不是继承来的），那么这个赋值操作只改变这个已有属性x的值。</li> <li>如果o中不存在属性x，那么赋值操作给o添加一个新属性x</li> <li>如果之前o继承自属性x，那么这个继承的属性就被新创建的同名属性<strong>覆盖</strong>了。</li></ol> <p>属性赋值操作<strong>首先检查原型链</strong>，以此判定是否允许赋值操作。</p> <p>例如，如果o继承自一个只读属性x，那么赋值操作是不允许的。如果允许属性赋值操作，它也总是在原始对象上创建属性或对已有的属性赋值，而<strong>不会去修改原型链</strong>。</p> <p>在JS中，<u>只有在查询属性时才会体会到继承的存在</u>，而设置属性则和继承无关。该特性让程序员可以有选择地<strong>覆盖继承的属性</strong>。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109143712.png" alt="image-20201109143711904"></p> <div class="custom-block tip"><p class="custom-block-title">属性赋值的四种结果</p> <p>属性赋值要么<u>失败</u>、要么<u>创建一个属性</u>、要么在<u>原始对象中设置属性</u>，但有一个<strong>例外</strong>。</p> <p>如果o继承自属性x，而这个属性时一个具有setter方法的accessor属性，那么这时<u>将调用setter方法</u>，而不是给o创建一个属性x。</p> <p>需要注意的是，setter方法是由对象o调用的，而不是定义这个属性的原型对象调用的。因此如果setter方法定义任意属性，这个操作只是针对o本身，并不会修改原型链。</p></div> <h3 id="属性访问错误"><a href="#属性访问错误" class="header-anchor">#</a> 属性访问错误</h3> <ul><li><p>查询一个不存在的属性并不会报错，会返回undefined。</p></li> <li><p>如果对象不存在，那么试图查询这个不存在的对象的属性就会报错。</p> <ul><li>null和undefined值都没有属性，因此查询这些值的属性也会报错</li></ul></li></ul> <p>举个例子，假设book没有subtitle属性</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>book<span class="token punctuation">.</span>subtitle<span class="token punctuation">;</span> <span class="token comment">// =&gt; undefined:属性不存在</span>
book<span class="token punctuation">.</span>subtitle<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// =&gt; 抛出类型错误异常，undefined没有length属性</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>下面提供两种避免出错的方法：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109144328.png" alt="image-20201109144328591"></p> <p>第二种方法值得记忆。（利用了<code>&amp;&amp;</code>运算符的短路行为）</p> <ul><li>给null和undefined设置属性也会报类型错误。</li></ul> <div class="custom-block tip"><p class="custom-block-title">ES3之前的历史遗留问题</p> <ul><li>给其他值设置属性不总是成功：有一些属性是只读的，不能重新赋值；有一些对象不允许新增属性。但是这些设置属性的失败操作不会报错</li></ul> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109145238.png" alt="image-20201109145238021"></p></div> <p>在ES5的严格模式中已经修复上述的历史遗留问题，<u>在严格模式中，任何失败的属性设置操作都会抛出一个类型错误异常</u>。</p> <p>在下述这些场景下，给对象o设置属性p会失败：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109145444.png" alt="image-20201109145444177"></p> <h2 id="删除属性"><a href="#删除属性" class="header-anchor">#</a> 删除属性</h2> <p>delete运算符可以删除对象的属性。它的操作数应当是一个属性访问表达式。</p> <p>但是，delete只是断开属性和宿主对象的联系，而不会去操作属性中的属性。</p> <p>在销毁对象时，要遍历属性中的属性，依次删除。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109145605.png" alt="image-20201109145605248"></p> <p>delete运算符<strong>只能删除自有属性，不能删除继承属性</strong>。</p> <p>要删除继承属性必须<u>从定义这个属性的原型对象上删除它</u>，而且这会<u>影响到所有继承自这个原型的对象</u>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span>x <span class="token comment">//=&gt; 1</span>
<span class="token keyword">delete</span> b<span class="token punctuation">.</span>x<span class="token punctuation">;</span> <span class="token comment">// =&gt; true 但是并没有删除成功</span>
b<span class="token punctuation">.</span>x <span class="token comment">// =&gt; 1 delete只能删除自有属性，不能删除继承属性</span>
<span class="token keyword">delete</span> a<span class="token punctuation">.</span>x<span class="token punctuation">;</span> <span class="token comment">// =&gt; true 在原型对象上删除成功</span>
b<span class="token punctuation">.</span>x <span class="token comment">// =&gt; undefined 影响到所有继承自这个原型的对象</span>
a<span class="token punctuation">.</span>x <span class="token comment">// =&gt; undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>关于delete运算符，详情可见第四章我们已经有做过总结。</p> <p>当delete表达式删除成功或没有任何副作用（比如删除不存在的属性）时，它返回true；如果delete后不是一个属性访问表达式，delete也返回true。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109150413.png" alt="image-20201109150413070"></p> <p>delete不能删除那些可配置性为false的属性（尽管可以删除不可扩展对象的可配置属性）。</p> <p>某些内置对象的属性是不可配置的，例如通过变量声明和函数声明创建的全局对象的属性。</p> <p>在严格模式中，删除一个不可配置属性会报一个类型错误；在非严格模式中（以及ES3中），会返回false。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109150958.png" alt="image-20201109150958637"></p> <blockquote><p>使用var定义，delete this.x和delete x得到的效果等价，报错不同：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>严格模式下：
<span class="token string">'use strict'</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span> <span class="token comment">// =&gt; 类型错误 Uncaught TypeError: Cannot delete property 'x' of #&lt;Window&gt; at &lt;anonymous&gt;:3:1</span>
<span class="token keyword">delete</span> x<span class="token punctuation">;</span> <span class="token comment">// =&gt; 语法错误 Uncaught SyntaxError: Delete of an unqualified identifier in strict mode.</span>
x <span class="token comment">// =&gt; 1 无法成功删除</span>

非严格模式下：
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> x<span class="token punctuation">;</span> <span class="token comment">// =&gt; false</span>
<span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span> <span class="token comment">// =&gt; false</span>
x <span class="token comment">// =&gt; 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>使用this.x定义，在非严格模式下两者皆可成功删除，在严格模式下只能使用delete this.x删除</p></blockquote> <p>在非严格模式中删除全局对象的可配置属性时，可以省略对全局对象的引用。直接在delete操作符后跟随要删除的属性名即可：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109151637.png" alt="image-20201109151637539"></p> <p>然而在严格模式中，delete后跟随一个非法的操作数（比如x），会报一个语法错误。因此必须显式指定对象及其属性：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109151722.png" alt="image-20201109151722217"></p> <h2 id="检测属性"><a href="#检测属性" class="header-anchor">#</a> 检测属性</h2> <p>JS对象可以看做属性的集合，我们经常会检测集合中成员的所属关系——判断某个属性是否存在于某个对象中。</p> <p>可以通过in运算符、hasOwnProperty()和propertyIsEnumerable()方法、属性查询做到这一点。</p> <h3 id="in运算符"><a href="#in运算符" class="header-anchor">#</a> in运算符</h3> <p>in运算符的左侧是属性名(字符串)，右侧是对象。</p> <p>如果对象的<strong>自有属性或继承属性</strong>中包含这个属性则返回true：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109152645.png" alt="image-20201109152645877"></p> <h3 id="hasownproperty"><a href="#hasownproperty" class="header-anchor">#</a> hasOwnProperty()</h3> <p>对象的<code>hasOwnProperty()</code>方法用来检测给定的名字是否是对象的<strong>自有属性</strong>。对于继承属性它将返回false</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109152753.png" alt="image-20201109152753461"></p> <h3 id="propertyisenumerable"><a href="#propertyisenumerable" class="header-anchor">#</a> propertyIsEnumerable()</h3> <p><code>propertyIsEnumerable()</code>是<code>hasOwnProperty()</code>的增强版，只有检测到是<strong>自有属性</strong>且这个属性的<strong>可枚举型是true</strong>时它才返回true。</p> <p>某些内置属性时不可枚举的。通常由JS代码创建的属性都是可枚举的，除非在ES5中使用一个特殊的方法来改变属性的可枚举型。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109153113.png" alt="image-20201109153113110"></p> <h3 id="使用-运算符"><a href="#使用-运算符" class="header-anchor">#</a> 使用<code>!==</code>运算符</h3> <p>这是一种更简便的方法，用来判断一个属性是否是undefined。可以判断<strong>自有属性和继承属性</strong>。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109153215.png" alt="image-20201109153215368"></p> <p>然而有一种场景只能使用in运算符而不能使用<code>!==</code>运算符！</p> <p>in可以区分不存在的属性和存在但值为undefined的属性。例如下面的例子：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109153310.png" alt="image-20201109153309887"></p> <p>使用in运算符可以正确判断属性的存在性而不受其值是否为undefined影响。</p> <p><code>!==</code>可以区分undefined和null，有时则不必作这种区分，此时可以灵活使用<code>!=</code>：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109153428.png" alt="image-20201109153428490"></p> <h2 id="枚举属性"><a href="#枚举属性" class="header-anchor">#</a> 枚举属性</h2> <p>遍历对象的属性，通常使用for/in循环遍历，ES5提供了两个更好用的替代方案。</p> <h3 id="for-in循环"><a href="#for-in循环" class="header-anchor">#</a> for/in循环</h3> <p>在第五章中提到过，for/in循环可以在循环体中遍历对象中所有<strong>可枚举</strong>的属性（包括<strong>自有属性和继承属性</strong>），把属性名称赋值给循环变量。</p> <p>对象继承的内置方法不可枚举，但在代码中给对象添加的属性都是可枚举的（除非用下文提到的一个方法将它们转换为不可枚举的）</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109204336.png" alt="image-20201109204336601"></p> <p>有许多实用工具库给<strong>Object.prototype</strong>添加了新的方法或属性，这些方法和属性可以被所有对象继承并使用。然而在ES5标准之前，这些新添加的方法是<u>不能定义为不可枚举的</u>，因此它们都可以在for/in循环中枚举出来。</p> <p>为了避免这种情况，需要过滤for/in循环返回的属性，有下面两种方法：</p> <ul><li>跳过继承的属性</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span><span class="token punctuation">(</span>p <span class="token keyword">in</span> o<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>o<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>跳过方法</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span><span class="token punctuation">(</span>p <span class="token keyword">in</span> o<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> o<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>下面的例子定义了一些有用的工具函数来操控对象的属性，用到了for/in循环。实际上extend()函数经常出现在JS实用工具库中。</p> <ul><li>复制可枚举属性；如果同名，则覆盖</li></ul> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109204958.png" alt="image-20201109204958052"></p> <ul><li>复制可枚举属性；如果同名，不受影响</li></ul> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109205052.png" alt="image-20201109205052517"></p> <ul><li>删除差异的属性</li></ul> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109205124.png" alt="image-20201109205124794"></p> <ul><li>删除相同的属性</li></ul> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109205157.png" alt="image-20201109205157046"></p> <ul><li>同时拥有两者属性；如果有重名属性，使用p中属性</li></ul> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109205235.png" alt="image-20201109205235027"></p> <ul><li>同时拥有两者属性；但p中属性的值被忽略（？）</li></ul> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109205456.png" alt="image-20201109205455910"></p> <ul><li>返回对象中可枚举的自有属性的名字</li></ul> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109205528.png" alt="image-20201109205528111"></p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109205534.png" alt="image-20201109205534266"></p> <h3 id="object-keys"><a href="#object-keys" class="header-anchor">#</a> <code>Object.keys()</code></h3> <p>ES5定义的，返回一个数组，这个数组由对象中<strong>可枚举的自有属性</strong>的名称组成。</p> <p>工作原理与上面的keys(o)类似。</p> <h3 id="object-getownpropertynames"><a href="#object-getownpropertynames" class="header-anchor">#</a> <code>Object.getOwnPropertyNames()</code></h3> <p>ES5定义，它和<code>Object.keys()</code>类似，只是它返回对象的所有<strong>自有属性</strong>的名称，而<u>不仅仅是可枚举的属性</u>。</p> <p>在ES3中是无法实现类似的函数的，因为<u>ES3中没有提供任何方法来获取对象不可枚举的属性</u>。</p> <h3 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h3> <ul><li>for/in循环 =&gt; 可以在循环体中遍历对象中所有<strong>可枚举</strong>的属性（包括<strong>自有属性和继承属性</strong>）</li> <li><code>Object.keys()</code> =&gt; 得到由对象中<strong>可枚举的自有属性</strong>的名称组成的数组</li> <li><code>Object.getOwnPropertyNames()</code> =&gt; 返回对象的所有<strong>自有属性</strong>的名称（包括可枚举、不可枚举的属性）</li></ul> <h2 id="属性getter和setter"><a href="#属性getter和setter" class="header-anchor">#</a> 属性getter和setter</h2> <p>对象属性 = 名字+值+一组特性</p> <p>在ES5中，<u>属性值可以用一个或两个方法替代</u>，这两个方法就是getter和setter。</p> <p>由getter和setter定义的属性称为<strong>存取器属性</strong>，它不同于<strong>数据属性</strong>（只有一个简单的值）。</p> <p>流程如下：</p> <ol><li><p>当程序<strong>查询</strong>存取器属性的值时，JS调用<strong>getter</strong>方法（无参数）。<u>这个方法返回的值就是属性存取表达式的值</u>。</p></li> <li><p>当程序<strong>设置</strong>一个存储器属性的值时，JS调用<strong>setter</strong>方法，将赋值表达式右侧的值当做参数传入setter。<u>可以忽略setter方法的返回值</u>。</p></li></ol> <p>和数据属性不同，存取器属性<strong>不具有可写性</strong>。</p> <p>如果属性同时具有getter和setter方法，那么它是一个读/写属性。</p> <p>如果它只有getter方法，那么它是一个只读属性。</p> <p>如果只有setter方法，那么它是一个只写属性（数据属性中有一些例外）。读取只写属性总是返回undefined。</p> <p>定义存取器属性最简单的方法是使用<u>对象直接量语法</u>的一种扩展写法：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109212135.png" alt="image-20201109212135847"></p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109212144.png" alt="image-20201109212144306"></p> <div class="custom-block danger"><p class="custom-block-title">思考</p> <p>如果存取器属性定义的函数不成对会怎么样？会像上面所说的变成一个只读或只写属性吗？</p></div> <p><strong>存取器属性定义为一个或两个和属性同名的函数</strong>。这个函数定义没有使用function关键字，而是使用get和（或）set。</p> <p>没有使用冒号将属性名和函数体分隔开，但在函数体的结束和下一个方法或数据属性之间有<strong>逗号分隔</strong>。</p> <p>书上给出了一个表示2D笛卡尔点坐标的对象，x和y分别表示对应点的x和y坐标。它还有两个等价的存取器属性用来表示点的极坐标：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109212437.png" alt="image-20201109212437017"></p> <p>在这里可以看到getter和setter中<strong>this</strong>关键字的用法。</p> <p>回顾一下第四章——调用表达式提到的this几种用法：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109212909.png" alt="image-20201109212909765"></p> <p>在这里，JS把这些函数当做对象的方法来调用，也就是说，在函数体内的<u>this指向表示这个点的对象</u>。</p> <p>因此，r属性的getter方法可以通过this.x和this.y引用x和y属性。</p> <p>和数据属性一样，<strong>存取器属性是可以继承的</strong>。</p> <p>因此可以将上述代码中的对象p当做另一个“点”的原型，给新对象定义它的x和y属性，同时继承r和theta属性：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109215202.png" alt="image-20201109215202107"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token punctuation">{</span>
        x<span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        y<span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        t<span class="token operator">:</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span>

        <span class="token keyword">get</span> <span class="token function">r</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">set</span> <span class="token function">r</span><span class="token punctuation">(</span><span class="token parameter">newvalue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> oldvalue <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> ratio <span class="token operator">=</span> newvalue <span class="token operator">/</span> oldvalue<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">*=</span> ratio<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">*=</span> ratio<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">get</span> <span class="token function">theta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">atan2</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">set</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">newvalue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>t <span class="token operator">=</span> newvalue<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;p.r=&quot;</span><span class="token operator">+</span>p<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; p.r=1.4142135623730951</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;p.theta=&quot;</span><span class="token operator">+</span>p<span class="token punctuation">.</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; p.theta=0.7853981633974483</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;p.test=&quot;</span><span class="token operator">+</span>p<span class="token punctuation">.</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; p.test=undefined 只写数据无法读取</span>
    p<span class="token punctuation">.</span>theta <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;p.theta=&quot;</span><span class="token operator">+</span>p<span class="token punctuation">.</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; p.theta=0.7853981633974483 只读数据 赋值失败</span>

    <span class="token keyword">var</span> q <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span>x<span class="token punctuation">,</span> q<span class="token punctuation">.</span>y<span class="token punctuation">,</span> q<span class="token punctuation">.</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1 1 0.7853981633974483 继承了p中的数据</span>
	q<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    q<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span>x<span class="token punctuation">,</span> q<span class="token punctuation">.</span>y<span class="token punctuation">,</span> q<span class="token punctuation">.</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; 3 2 0.5880026035475675 覆盖了继承的数据 并且计算值发生改变</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;q.r=&quot;</span><span class="token operator">+</span>q<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; q.r=3.605551275463989</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;q.theta=&quot;</span><span class="token operator">+</span>q<span class="token punctuation">.</span>theta<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; q.theta=0.5880026035475675</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;q.test=&quot;</span><span class="token operator">+</span>q<span class="token punctuation">.</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; q.test=undefined 只读/写属性不会发生改变</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>还有很多场景可以用到存取器属性，比如智能检测属性的写入值以及在每次属性读取时返回不同值：</p> <p>下面这个例子中，对象产生严格自增的序列号：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109221327.png" alt="image-20201109221327142"></p> <p>测试如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> serialnum <span class="token operator">=</span> <span class="token punctuation">{</span>
        $n<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token keyword">get</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$n<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">set</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>$n <span class="token operator">=</span> n<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token string">&quot;input a bigger number&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>serialnum<span class="token punctuation">.</span>$n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 0</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>serialnum<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; 0 自增</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>serialnum<span class="token punctuation">.</span>$n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; 1</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>serialnum<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; 1</span>
    serialnum<span class="token punctuation">.</span>$n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    serialnum<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    serialnum<span class="token punctuation">.</span>$n <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    serialnum<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>serialnum<span class="token punctuation">.</span>$n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; 10</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>serialnum<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; 10 自增</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>serialnum<span class="token punctuation">.</span>$n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; 11 </span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>serialnum<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; 11</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>书上还给了一个例子：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/20201109221646.png" alt="image-20201109221646807"></p> <p>本节介绍了如何<u>给对象直接量定义存取器属性</u>，下节介绍如何给一个已经存在的对象添加一个存取器属性。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-wu-zhang.html" class="prev">
        第五章-语句
      </a></span> <span class="next"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-2.html">
        第六章2
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d811c258.js" defer></script><script src="/assets/js/2.b0d06978.js" defer></script><script src="/assets/js/21.1b73581a.js" defer></script>
  </body>
</html>
