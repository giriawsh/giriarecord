<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第七章2 | Girecord</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/pencil.png">
    <meta name="description" content="Giria的学习记录">
    <link rel="preload" href="/assets/css/0.styles.a748b10c.css" as="style"><link rel="preload" href="/assets/js/app.d811c258.js" as="script"><link rel="preload" href="/assets/js/2.b0d06978.js" as="script"><link rel="preload" href="/assets/js/24.65381257.js" as="script"><link rel="prefetch" href="/assets/js/10.c058f302.js"><link rel="prefetch" href="/assets/js/11.8dd384d0.js"><link rel="prefetch" href="/assets/js/12.a57db71e.js"><link rel="prefetch" href="/assets/js/13.ba28784c.js"><link rel="prefetch" href="/assets/js/14.c932930e.js"><link rel="prefetch" href="/assets/js/15.214d63a1.js"><link rel="prefetch" href="/assets/js/16.d7b01f05.js"><link rel="prefetch" href="/assets/js/17.d86602f8.js"><link rel="prefetch" href="/assets/js/18.9f5cd19a.js"><link rel="prefetch" href="/assets/js/19.7fd1e862.js"><link rel="prefetch" href="/assets/js/20.d65b214c.js"><link rel="prefetch" href="/assets/js/21.1b73581a.js"><link rel="prefetch" href="/assets/js/22.a1991fce.js"><link rel="prefetch" href="/assets/js/23.86ad9e68.js"><link rel="prefetch" href="/assets/js/25.7bd935b2.js"><link rel="prefetch" href="/assets/js/26.32e3f54b.js"><link rel="prefetch" href="/assets/js/27.4b8a459a.js"><link rel="prefetch" href="/assets/js/28.8fbb372e.js"><link rel="prefetch" href="/assets/js/29.14d35dd5.js"><link rel="prefetch" href="/assets/js/3.2e07bdbd.js"><link rel="prefetch" href="/assets/js/30.836a9de2.js"><link rel="prefetch" href="/assets/js/31.557cf90d.js"><link rel="prefetch" href="/assets/js/32.9cb9ce1c.js"><link rel="prefetch" href="/assets/js/33.75bed696.js"><link rel="prefetch" href="/assets/js/34.62b0841c.js"><link rel="prefetch" href="/assets/js/35.ddeecc7e.js"><link rel="prefetch" href="/assets/js/36.dda463c4.js"><link rel="prefetch" href="/assets/js/37.16b89d36.js"><link rel="prefetch" href="/assets/js/38.b10e01fe.js"><link rel="prefetch" href="/assets/js/39.0c104c50.js"><link rel="prefetch" href="/assets/js/4.35c41ba6.js"><link rel="prefetch" href="/assets/js/40.f0cb89f5.js"><link rel="prefetch" href="/assets/js/41.480570b4.js"><link rel="prefetch" href="/assets/js/42.08b42bef.js"><link rel="prefetch" href="/assets/js/43.8d61e275.js"><link rel="prefetch" href="/assets/js/44.b8e43077.js"><link rel="prefetch" href="/assets/js/45.54d487f1.js"><link rel="prefetch" href="/assets/js/46.5a382eae.js"><link rel="prefetch" href="/assets/js/47.1f8796a9.js"><link rel="prefetch" href="/assets/js/48.8d46e23a.js"><link rel="prefetch" href="/assets/js/49.72b8ca20.js"><link rel="prefetch" href="/assets/js/5.7b10027c.js"><link rel="prefetch" href="/assets/js/50.b2344657.js"><link rel="prefetch" href="/assets/js/51.080a56f5.js"><link rel="prefetch" href="/assets/js/52.bad7a065.js"><link rel="prefetch" href="/assets/js/53.ad9bdcfd.js"><link rel="prefetch" href="/assets/js/54.6770d917.js"><link rel="prefetch" href="/assets/js/55.c0172ecd.js"><link rel="prefetch" href="/assets/js/56.49c919d4.js"><link rel="prefetch" href="/assets/js/57.1767b53b.js"><link rel="prefetch" href="/assets/js/58.41eeaa28.js"><link rel="prefetch" href="/assets/js/59.64f20b7f.js"><link rel="prefetch" href="/assets/js/6.5964ef22.js"><link rel="prefetch" href="/assets/js/60.0f75477a.js"><link rel="prefetch" href="/assets/js/61.4be6c4a4.js"><link rel="prefetch" href="/assets/js/62.e5d06d6d.js"><link rel="prefetch" href="/assets/js/63.955d4114.js"><link rel="prefetch" href="/assets/js/64.d3e90038.js"><link rel="prefetch" href="/assets/js/65.e8997251.js"><link rel="prefetch" href="/assets/js/66.e43a4e42.js"><link rel="prefetch" href="/assets/js/67.178746ff.js"><link rel="prefetch" href="/assets/js/68.8b74209e.js"><link rel="prefetch" href="/assets/js/69.cd787813.js"><link rel="prefetch" href="/assets/js/7.a1320352.js"><link rel="prefetch" href="/assets/js/70.51f9e21c.js"><link rel="prefetch" href="/assets/js/71.e52c53ad.js"><link rel="prefetch" href="/assets/js/72.48ee5f30.js"><link rel="prefetch" href="/assets/js/73.d271fa49.js"><link rel="prefetch" href="/assets/js/74.a6baf45f.js"><link rel="prefetch" href="/assets/js/75.096cf42e.js"><link rel="prefetch" href="/assets/js/76.a2318a27.js"><link rel="prefetch" href="/assets/js/8.6a3c595d.js"><link rel="prefetch" href="/assets/js/9.586c950f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a748b10c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Girecord</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源码学习" class="dropdown-title"><span class="title">源码学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="源码学习" class="mobile-dropdown-title"><span class="title">源码学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/source/element/" class="nav-link">
  Element UI
</a></li><li class="dropdown-item"><!----> <a href="/source/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="书籍学习" class="dropdown-title"><span class="title">书籍学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="书籍学习" class="mobile-dropdown-title"><span class="title">书籍学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/books/theDefinitiveGuideToJavaScript/" class="nav-link router-link-active">
  JavaScript权威指南
</a></li><li class="dropdown-item"><!----> <a href="/books/theNodeBeginnerBook/" class="nav-link">
  NodeJS入门
</a></li><li class="dropdown-item"><!----> <a href="/books/diveIntoNode/" class="nav-link">
  深入浅出Node.js
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法学习" class="dropdown-title"><span class="title">算法学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法学习" class="mobile-dropdown-title"><span class="title">算法学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/codingInterviews/" class="nav-link">
  剑指Offer系列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文学习" class="dropdown-title"><span class="title">博文学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文学习" class="mobile-dropdown-title"><span class="title">博文学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/postsLearning/collect/" class="nav-link">
  博文收集
</a></li><li class="dropdown-item"><!----> <a href="/postsLearning/2020/" class="nav-link">
  2020年
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端相关" class="dropdown-title"><span class="title">前端相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端相关" class="mobile-dropdown-title"><span class="title">前端相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS库相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe/nodejs/" class="nav-link">
  Node.js
</a></li><li class="dropdown-subitem"><a href="/fe/vuejs/" class="nav-link">
  Vue.js
</a></li><li class="dropdown-subitem"><a href="/fe/reactjs/" class="nav-link">
  React.js
</a></li><li class="dropdown-subitem"><a href="/fe/reactjs/" class="nav-link">
  AJAX
</a></li><li class="dropdown-subitem"><a href="/fe/svgjs/" class="nav-link">
  SVG.js
</a></li></ul></li><li class="dropdown-item"><h4>
          框架相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe/nuxtjs/" class="nav-link">
  Nuxt框架
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/application/" class="nav-link">
  志愿填报建议
</a></li></ul></div></div><div class="nav-item"><a href="https://www.giriawsh.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人文章
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源码学习" class="dropdown-title"><span class="title">源码学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="源码学习" class="mobile-dropdown-title"><span class="title">源码学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/source/element/" class="nav-link">
  Element UI
</a></li><li class="dropdown-item"><!----> <a href="/source/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="书籍学习" class="dropdown-title"><span class="title">书籍学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="书籍学习" class="mobile-dropdown-title"><span class="title">书籍学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/books/theDefinitiveGuideToJavaScript/" class="nav-link router-link-active">
  JavaScript权威指南
</a></li><li class="dropdown-item"><!----> <a href="/books/theNodeBeginnerBook/" class="nav-link">
  NodeJS入门
</a></li><li class="dropdown-item"><!----> <a href="/books/diveIntoNode/" class="nav-link">
  深入浅出Node.js
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法学习" class="dropdown-title"><span class="title">算法学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法学习" class="mobile-dropdown-title"><span class="title">算法学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/codingInterviews/" class="nav-link">
  剑指Offer系列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文学习" class="dropdown-title"><span class="title">博文学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文学习" class="mobile-dropdown-title"><span class="title">博文学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/postsLearning/collect/" class="nav-link">
  博文收集
</a></li><li class="dropdown-item"><!----> <a href="/postsLearning/2020/" class="nav-link">
  2020年
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端相关" class="dropdown-title"><span class="title">前端相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端相关" class="mobile-dropdown-title"><span class="title">前端相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JS库相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe/nodejs/" class="nav-link">
  Node.js
</a></li><li class="dropdown-subitem"><a href="/fe/vuejs/" class="nav-link">
  Vue.js
</a></li><li class="dropdown-subitem"><a href="/fe/reactjs/" class="nav-link">
  React.js
</a></li><li class="dropdown-subitem"><a href="/fe/reactjs/" class="nav-link">
  AJAX
</a></li><li class="dropdown-subitem"><a href="/fe/svgjs/" class="nav-link">
  SVG.js
</a></li></ul></li><li class="dropdown-item"><h4>
          框架相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe/nuxtjs/" class="nav-link">
  Nuxt框架
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/application/" class="nav-link">
  志愿填报建议
</a></li></ul></div></div><div class="nav-item"><a href="https://www.giriawsh.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人文章
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript权威指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-er-zhang-ci-fa-jie-gou.html" class="sidebar-link">第二章</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-san-zhang-shu-ju-lei-xing-shu-zi-wen-ben.html" class="sidebar-link">第三章1</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-san-zhang-2.html" class="sidebar-link">第三章2</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-san-zhang-3-bian-liang-sheng-ming-bian-liang-zuo-yong-yu.html" class="sidebar-link">第三章3</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-si-zhang-1.html" class="sidebar-link">第四章1</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-si-zhang-2.html" class="sidebar-link">第四章2</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-si-zhang-3.html" class="sidebar-link">第四章3</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-wu-zhang.html" class="sidebar-link">第五章-语句</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-1.html" class="sidebar-link">第六章1</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-liu-zhang-2.html" class="sidebar-link">第六章2</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-1.html" class="sidebar-link">第七章1</a></li><li><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html" aria-current="page" class="active sidebar-link">第七章2</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#多维数组" class="sidebar-link">多维数组</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#数组方法" class="sidebar-link">数组方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#join" class="sidebar-link">join()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#reverse" class="sidebar-link">reverse()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#sort" class="sidebar-link">sort()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#concat" class="sidebar-link">concat()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#slice" class="sidebar-link">slice()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#splice" class="sidebar-link">splice()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#push-和pop" class="sidebar-link">push()和pop()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#unshift-和shift" class="sidebar-link">unshift()和shift()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#tostring-和tolocalestring" class="sidebar-link">toString()和toLocaleString()</a></li></ul></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#es5中的数组方法" class="sidebar-link">ES5中的数组方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#foreach" class="sidebar-link">forEach()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#map" class="sidebar-link">map()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#filter" class="sidebar-link">filter()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#every-and-some" class="sidebar-link">every() and some()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#reduce-and-reduceright" class="sidebar-link">reduce() and reduceRight()</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#indexof-and-lastindexof" class="sidebar-link">indexOf() and lastIndexOf()</a></li></ul></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#数组类型" class="sidebar-link">数组类型</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#类数组对象" class="sidebar-link">类数组对象</a></li><li class="sidebar-sub-header"><a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-2.html#作为数组的字符串" class="sidebar-link">作为数组的字符串</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第七章-数组"><a href="#第七章-数组" class="header-anchor">#</a> 第七章 数组</h1> <h2 id="多维数组"><a href="#多维数组" class="header-anchor">#</a> 多维数组</h2> <p>JS不支持真正的多维数组，但可以用数组的数组来近似。</p> <p>访问数组的数组中的元素，只要简单地使用两次<code>[]</code>操作符。</p> <p>示例如下：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201207190244493.png" alt="image-20201207190244493"></p> <h2 id="数组方法"><a href="#数组方法" class="header-anchor">#</a> 数组方法</h2> <p>ES3在<code>Array.prototype</code>中定义了操作数组很有用的函数，这意味着这些函数作为任何数组的方法都是可用的。</p> <h3 id="join"><a href="#join" class="header-anchor">#</a> join()</h3> <p><code>Array.join()</code>将数组中所有元素都转化为<strong>字符串</strong>并连接在一起，返回最后生成的字符串。</p> <p>可以指定一个可选的字符串在生成的字符串中分隔数组的各个元素。</p> <p>默认使用逗号。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201207204022438.png" alt="image-20201207204022438"></p> <p><code>Array.join()</code>方法是<code>String.split()</code>方法的逆向操作，后者是将字符串分割成若干块来创建一个数组。</p> <h3 id="reverse"><a href="#reverse" class="header-anchor">#</a> reverse()</h3> <p><code>Array.reverse()</code>方法将数组中的元素<strong>颠倒顺序</strong>，返回逆序的数组。</p> <p>⭐它不通过重新排列的元素创建新的数组，而是在<strong>原先</strong>的数组中重新排列它们。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//=&gt; a = [3,2,1]</span>
a<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> a <span class="token comment">// =&gt; true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="sort"><a href="#sort" class="header-anchor">#</a> sort()</h3> <p><code>Array.sort()</code>方法将数组中的元素排列并返回排序后的数组。（修改了原先调用的数组）</p> <p>当不带参数调用时，数组元素以<strong>字母表</strong>顺序排序。（如有必要将临时转化为字符串进行比较）</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201207204231339.png" alt="image-20201207204231339"></p> <p>如果数组包含undefined元素，它们会被排到数组的尾部。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;u&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token string">&quot;z&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; [&quot;a&quot;, &quot;u&quot;, &quot;undefined&quot;, &quot;z&quot;, undefined]</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; &quot;a,u,undefined,z,&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>必须给sort()方法传递一个比较函数。该函数决定了它的两个参数在排好序的数组中的先后顺序：</p> <ul><li>假设第一个参数应该在<strong>前</strong>，比较函数应返回一个<strong>小于</strong>0的数值</li> <li>假设第一个参数应该在<strong>后</strong>，比较函数应返回一个<strong>大于</strong>0的数值</li> <li>假设两个值相等，比较函数应返回0</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1111</span><span class="token punctuation">,</span> <span class="token number">222</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt;  [1111, 222, 33, 4]</span>
a<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token operator">-</span>b<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; [4, 33, 222, 1111]</span>
a<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> b<span class="token operator">-</span>a<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; [1111, 222, 33, 4]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>注意，这里使用<u>匿名函数表达式</u>非常方便（比较函数只使用一次）。</p> <p>下面这个例子，需要对一个字符串数组执行不区分大小写的字母表排序。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201207205104218.png" alt="image-20201207205104218"></p> <h3 id="concat"><a href="#concat" class="header-anchor">#</a> concat()</h3> <p><code>Array.concat()</code>方法创建并返回一个新数组，它的元素包括调用concat()的原始数组的元素和concat()每个参数。</p> <p>如果参数中任何一个自身是数组，则连接的是<strong>数组的元素</strong>，而非数组本身。</p> <p>⭐ concat()不会递归扁平化数组的数组（只会去掉最外面的<code>[]</code>符号），也不会修改调用的数组（返回新数组）,也不会像数组自动留空一样串接空值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 返回[1,2,3,4,5,6,7,[8,9],10,[11,[12,13]]]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="slice"><a href="#slice" class="header-anchor">#</a> slice()</h3> <p><code>Array.slice()</code>方法返回指定数组的一个片段或子数组。</p> <p>两个参数分别指定了片段的开始和结束的位置。</p> <p><code>[开头，结尾）</code>返回的数组包含第一个参数指定的位置，和所有到<strong>但不含</strong>第二个参数指定的位置之间的所有数组元素。</p> <ul><li>如果只指定一个参数，返回的数组将包含从开始位置到数组结尾的所有元素</li> <li>如果参数中出现负数，它表示相对于数组中最后一个元素的位置</li></ul> <blockquote><p>-1：最后一个元素</p> <p>-3：倒数第三个元素</p></blockquote> <p>⭐ slice()不会修改调用的数组（返回新数组）</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201207210151056.png" alt="image-20201207210151056"></p> <h3 id="splice"><a href="#splice" class="header-anchor">#</a> splice()</h3> <p><code>Array.splice()</code>方法是在数组中插入或删除元素的通用方法。</p> <p>⭐不同于slice()和concat()，splice()会修改调用的数组。</p> <p><code>splice()</code>能够从数组中删除、插入元素，或者同时完成这两种操作。</p> <p>在插入或删除之后，数组元素会根据需要增加或缩小它们的索引值，因此数组的其他部分仍然保持连续。</p> <p>第一个参数，指定了插入和（或）删除的起始位置(删除的元素包括起始位置)。</p> <p>第二个参数，指定了应该从数组中删除的元素的个数。（如果省略第二个参数，从起始点开始到数组结尾的所有元素都将被删除）</p> <p>返回一个删除元素组成的数组，如果没有删除元素就返回一个空数组。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; [1, 2, 3, 4, 5, 6, 7, 8]</span>
a <span class="token comment">// =&gt; []</span>

<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span>
b<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; [2, 3, 4]</span>
b <span class="token comment">// =&gt; [1, 5, 6, 7, 8]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>前两个参数指定了需要删除的数组元素，紧随其后的任意个数的参数指定了需要插入到数组中的元素,从第一个参数指定的位置开始插入。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
a<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; []</span>
a <span class="token comment">// =&gt; [1, 2, &quot;a&quot;, &quot;b&quot;, 3, 4, 5]</span>
a<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">102</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">103</span><span class="token punctuation">,</span><span class="token number">104</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; [&quot;a&quot;, &quot;b&quot;]</span>
a <span class="token comment">// =&gt; [1,2,[100,101],[102,[103,104]],3,4,5]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>⭐区别于concat(),splice()会插入<strong>数组本身</strong>而非数组的元素。</p> <h3 id="push-和pop"><a href="#push-和pop" class="header-anchor">#</a> push()和pop()</h3> <p>这两个方法允许数组当作栈来调用。</p> <p>push()方法在数组的<strong>尾部</strong>添加一个或多个元素，并<u>返回数组新的长度</u>。</p> <p>pop()方法删除数组的最后一个元素，减少数组长度并<u>返回它删除的值</u>。</p> <p>⭐ 两个方法都修改并替换原始数组（改变了调用的数组），而非生成一个修改版的新数组</p> <p>组合使用push()和pop()能够用JS数组实现先进后出的栈。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201207212946852.png" alt="image-20201207212946852"></p> <h3 id="unshift-和shift"><a href="#unshift-和shift" class="header-anchor">#</a> unshift()和shift()</h3> <p>这两个方法的行为非常类似于push()和pop()，不一样的是它们是在数组的<strong>头部</strong>进行操作。</p> <p>unshift()在数组的头部添加一个或多个元素，并将已存在的元素移动到更高索引的位置来获得足够的空间，最后<u>返回数组新的长度</u>。</p> <p>shift()删除数组的第一个元素<u>并将其返回</u>，然后把所有随后的元素下移一个位置。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201207213555275.png" alt="image-20201207213555275"></p> <div class="custom-block tip"><p class="custom-block-title">插入多个值时并不是单个插入的</p> <p>一次性使用push多个元素时，并不会拆分进行操作，而会将整个输入都作为一个参数：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a <span class="token comment">// =&gt; [1, 2, 3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>unshift()也同理，参数时一次性插入的。这意味着最终的数组中插入的元素的顺序和它们在参数列表中的顺序一致：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a <span class="token comment">// =&gt; [1, 2, 3, 0]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div> <h3 id="tostring-和tolocalestring"><a href="#tostring-和tolocalestring" class="header-anchor">#</a> toString()和toLocaleString()</h3> <p>针对数组，toString()方法将其每个元素转化为字符串（如有必要调用元素的toString()方法），并且输出用<strong>逗号</strong>分割的字符串列表。</p> <p>⭐输出不包括方括号或其他任何形式的包裹数组值的分隔符：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201207214247700.png" alt="image-20201207214247700"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;1,a,,,,2,3,b&quot;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// =&gt; true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这里与不使用任何参数调用join()方法返回的字符串是一样的。</p> <p>toLocaleString()是toString()方法的本地化版本，调用元素的toLocaleString()方法将每个数组元素转化为字符串，并且使用<strong>本地化</strong>（和自定义实现的）分隔符将这些字符串连接起来生成最终的字符串。</p> <h2 id="es5中的数组方法"><a href="#es5中的数组方法" class="header-anchor">#</a> ES5中的数组方法</h2> <p>ES中定义了9个新的数组方法来遍历、映射、过滤、检测、简化和搜索数组。</p> <p>ES中的数组方法概述：</p> <ul><li>大多数方法的第一个参数接收一个函数，并且对数组的每个元素（或一些元素）调用一次该函数
<ul><li>如果是稀疏数组，对不存在的元素不调用传递的函数</li> <li>第二个参数是可选的，如果有，则调用的函数被看做是第二个参数的方法。也就是说，在调用函数时传递进去的第二个参数作为它的this关键字的值来使用</li></ul></li> <li>大多数情况下，调用提供的函数使用三个参数：数组元素、元素的索引、数组本身
<ul><li>通常只要第一个参数值，可以忽略后两个参数</li></ul></li> <li>ES5中的数组方法都不会修改它们调用的原始数组。当然，传递给这些方法的函数是可以修改这些数组的。</li></ul> <h3 id="foreach"><a href="#foreach" class="header-anchor">#</a> forEach()</h3> <p><code>forEach()</code>方法从头至尾遍历数组，为每个元素调用指定的函数。</p> <p>第一个参数：传递的函数</p> <p>使用三个参数调用该函数：数组元素、元素的索引、数组本身</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201211210834675.png" alt="image-20201211210834675"></p> <div class="custom-block tip"><p class="custom-block-title">无法被中止</p> <p><code>forEach()</code>无法在所有元素都传递给调用的函数之前终止遍历。</p> <p>也就是说，没有像for循环中使用的相应的break语句。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201211211059114.png" alt="image-20201211211059114"></p> <p>如果要提前终止，必须把forEach()方法放在一个try块中，并能抛出一个异常。</p> <p>如果forEach()调用的函数抛出<strong>foreach.break</strong>异常，循环会提前终止。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foreach</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>f<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">try</span><span class="token punctuation">{</span>a<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
	<span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>e <span class="token operator">===</span> foreach<span class="token punctuation">.</span>break<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span> <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
foreach<span class="token punctuation">.</span>break <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;StopIteration&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// =&gt; </span>
Error<span class="token operator">:</span> StopIteration
    at <span class="token operator">&lt;</span>anonymous<span class="token operator">&gt;</span><span class="token operator">:</span><span class="token number">8</span><span class="token operator">:</span><span class="token number">17</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></div> <h3 id="map"><a href="#map" class="header-anchor">#</a> map()</h3> <p><code>map()</code>方法将调用的数组的<strong>每个元素</strong>传递给指定的函数，并返回一个数组，它包含该函数的返回值。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201211211626871.png" alt="image-20201211211626871"></p> <p>调用方式和传递给forEach()函数的调用方式一样。但传递给map()的函数应该有<strong>返回值</strong>。</p> <ul><li>map()返回的是<strong>新数组</strong>：不修改调用的数组</li> <li>如果是稀疏数组，返回的也是相同方式的稀疏数组：具有相同的长度，相同的缺失元素</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
c <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> v<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b <span class="token comment">// =&gt; [1, 2, 3, empty × 2, 0] 原数组没有发生改变</span>
c <span class="token comment">// =&gt; [2, 3, 4, empty × 2, 1]</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a <span class="token comment">// =&gt; [1, 2, 3, empty × 2, 0]</span>
a<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">v<span class="token punctuation">,</span>i<span class="token punctuation">,</span>a</span><span class="token punctuation">)</span><span class="token punctuation">{</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a <span class="token comment">// =&gt; [2, 3, 4, empty × 2, 1] forEach()也会同样方式地处理稀疏数组</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="filter"><a href="#filter" class="header-anchor">#</a> filter()</h3> <p>filter()方法返回的数组元素是调用的数组的一个<strong>子集</strong>。</p> <p>传递的函数是用来逻辑判定的：该函数返回true or false。</p> <ul><li>调用判定函数就像调用forEach()和map()一样</li> <li>如果返回值为true或能转换为true值，那么传递给判定函数的元素就是这个自己的成员
<ul><li>它将被添加到一个作为返回值的数组中</li></ul></li> <li>filter()返回的是<strong>新数组</strong>：不修改调用的数组</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
b <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> v <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token comment">// =&gt; [1, 2, 3, 4, 5]</span>
b<span class="token comment">// =&gt; [1, 2]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>注意！filter()会跳过稀疏数组中缺少的元素，它的返回数组总是<strong>稠密的</strong>。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> v <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; [1, 2, 0]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>为了压缩稀疏数组的空缺，代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> dense <span class="token operator">=</span> sparse<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>甚至，压缩空缺并删除undefined和null元素，可以这样写：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> x <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="every-and-some"><a href="#every-and-some" class="header-anchor">#</a> every() and some()</h3> <p>every()和some()方法是数组的逻辑判定：它们对数组元素应用指定的函数进行判定，返回true or false</p> <ul><li>every()方法相当于∀：当且仅当针对数组中的所有元素调用判定函数都返回true时，返回true</li></ul> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201211215620502.png" alt="image-20201211215620502"></p> <ul><li>some()相当于∃：当数组中至少有一个元素调用判定函数返回true，它就返回true</li></ul> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201211215740619.png" alt="image-20201211215740619"></p> <ul><li>注意！一旦some和every确认返回什么值，他们就会<strong>停止遍历数组元素</strong>。
<ul><li>some()在判定函数第一次返回true时返回true</li> <li>every()在判定函数第一次返回false时返回false</li></ul></li></ul> <p>根据数学上的惯例，<u>在空数组上调用时，every()返回true, some()返回false</u>。</p> <h3 id="reduce-and-reduceright"><a href="#reduce-and-reduceright" class="header-anchor">#</a> reduce() and reduceRight()</h3> <p>reduce()和reduceRight()方法使用指定的函数将数组元素进行<strong>组合</strong>，生成单个值。</p> <p>也可以称为“注入”和“折叠”。</p> <p>第一个参数：执行化简操作的函数。化简函数的任务就是采用某种方法把两个值组合或化简为一个值，并返回化简后的值。</p> <p>第二个（可选）参数：传递给函数的初始值。</p> <p>reduce()使用的参数与forEach()和map()使用的函数不同。后者采用的是数组元素、元素索引、数组本身作为第2~4个参数。</p> <p>但在reduce中：第一个参数是到目前为止的化简积累的结果。</p> <p>第一次调用函数时，第一个参数是一个初始值，就是它传递给reduce()的第二个参数。接下来的调用中，这个值就是上一次化简函数的返回值。若没有指定初始值，它将使用数组的第一个元素作为初始值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sum <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 15</span>
<span class="token keyword">var</span> max <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> x <span class="token operator">&gt;</span> y <span class="token operator">?</span> x <span class="token operator">:</span> y<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在空数组上，不带初始值参数调用reduce()将导致<u>类型错误异常</u></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> empty <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
empty<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">VM688</span><span class="token operator">:</span><span class="token number">2</span> Uncaught TypeError<span class="token operator">:</span> Reduce <span class="token keyword">of</span> empty array <span class="token keyword">with</span> no initial value
    at Array<span class="token punctuation">.</span><span class="token function">reduce</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>anonymous<span class="token operator">&gt;</span><span class="token punctuation">)</span>
    at <span class="token operator">&lt;</span>anonymous<span class="token operator">&gt;</span><span class="token operator">:</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">7</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果数组只有一个元素，并且没有指定初始值，或者有一个空数组并且指定一个初始值——reduce()只是简单地返回那个值而不会调用化简函数。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
test<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1 只有一个元素，并且没有指定初始值，只是简单返回而不会调用。</span>
test<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; 3 只有一个元素，但是指定了初始值，将会调用这个函数。</span>
<span class="token keyword">var</span> empty <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
empty<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; 2 空数组，并且指定一个初始值，只是简单返回而不会调用。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>reduceRight()工作原理和reduce一样，不同的是它按照数组索引从高到低（从右到左）地处理数组。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201211221721623.png" alt="image-20201211221721623"></p> <p>第一轮：accumulator = 4, value = 3, return = 3^4</p> <p>第二轮：accumulator = 3^4, value = 2, return = 2^(3^4)</p> <p>注意！reduce()和reduceRight()都能接收一个可选的参数，它<u>指定了化简函数调用时this关键字的值</u>。可选的初始值参数仍然需要占一个位置。</p> <p>数学计算不是reduce()和reduceRight()的唯一意图。可以使用reduce()来把它一般化，计算任意数目的对象的“并集”。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">,</span>p</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>prop <span class="token keyword">in</span> p<span class="token punctuation">)</span><span class="token punctuation">{</span>
		o<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> p<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> o<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">union</span><span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">,</span> p</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>o<span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> objects <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>x<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> y<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>y<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span> a<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>z<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> merged <span class="token operator">=</span> objects<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>union<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; {x: 1, y: 2, a: 4, z: 3}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>当两个对象拥有同名的属性时，union()函数使用第二个参数的属性值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token function">union</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>x<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; </span>
<span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这样，reduce()和reduceRight()在使用union()时给出了不同的结果：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> objects <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>x<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>y<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span> a<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>z<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span> a<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> leftunion <span class="token operator">=</span> objects<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>union<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rightunion <span class="token operator">=</span> objects<span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span>union<span class="token punctuation">)</span><span class="token punctuation">;</span>
leftunion <span class="token comment">// =&gt; {x: 1, a: 3, y: 2, z: 3} 取了靠右的</span>
rightunion <span class="token comment">// =&gt; {z: 3, a: 1, y: 2, x: 1} 取了靠左的</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="indexof-and-lastindexof"><a href="#indexof-and-lastindexof" class="header-anchor">#</a> indexOf() and lastIndexOf()</h3> <p>indexOf ()和 lastIndexOf()搜索整个数组中具有给定值的元素，返回找到的第一个元素的<strong>索引</strong>或者如果没有找到就返回-1.</p> <p>indexOf()从头至尾搜索，而lastIndexOf()则反向搜索。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201211225453153.png" alt="image-20201211225453153"></p> <p>不同于其他方法，indexOf ()和 lastIndexOf()不接收一个函数作为其参数。</p> <p>第一个参数时需要搜索的值，第二个参数是可选的：它<u>指定数组中的一个索引</u>，从那里开始搜索。</p> <p>如果省略第二个参数，indexOf()从头开始搜索，lastIndexOf()从末尾开始搜索。</p> <p>第二个参数也可以是负数，它代表相对数组末尾的偏移量，例如：-1指定数组的最后一个元素</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201211230056669.png" alt="image-20201211230056669"></p> <p>字符串中也有indexOf ()和 lastIndexOf()方法，它们和数组方法的功能类似。</p> <h2 id="数组类型"><a href="#数组类型" class="header-anchor">#</a> 数组类型</h2> <p>给定一个未知的对象，判定它是否为数组通常非常有用。</p> <p>在ES5中，可以使用<code>Array.isArray()</code>函数来做：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在ES5之前，要区分数组和非数组对象非常困难。</p> <p>typeof 对数组它返回“对象”（并且对于除了函数以外的所有对象都是如此），instanceof操作符只能用于简单的情形：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token comment">// =&gt; true</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token comment">// =&gt; false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">instanceof的问题</p> <p>在Web浏览器中可能有多个窗口或窗体（frame）存在，每个窗口都有自己的JS环境，有自己的全局对象。并且，每个全局对象都有自己的一组构造函数。</p> <p>因此一个窗体中的对象将不可能是另外窗体中的构造函数的示例。</p> <p>窗体之间的混淆不常发生，但这个问题足以证明instanceof操作符不能视为一个可靠的数组检测方法。</p></div> <p>解决方案是对象的<strong>类属性</strong>，对数组而言该属性的值总是“Array”</p> <p>因此在ES3中可以这样写：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> isArray <span class="token operator">=</span> Function<span class="token punctuation">.</span>isArray <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">typeof</span> o <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> 
	<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;[object Array]&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>实际上，此处类属性的检测就是ES5中<code>Array.isArray()</code>函数所做的事情。</p> <h2 id="类数组对象"><a href="#类数组对象" class="header-anchor">#</a> 类数组对象</h2> <p>JS数组有一些特性是其他对象所没有的：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201211233817646.png" alt="image-20201211233817646"></p> <p>但是它们不是定义数组的本质特性。</p> <p>一种常常完全合理的看法：把拥有一个数值length属性和对应非负整数属性的对象看做一种类型的数组。</p> <p>事件中，虽然不能在它们之上直接调用数组方法或希望length属性有什么特殊的行为。但是仍然可以用<u>针对数组遍历的方法来遍历它们</u>。</p> <p>结论就是很多数组算法针对<strong>类数组对象</strong>工作得很好，就像针对真正的数组一样。</p> <p>如果算法把数组看成只读的，或者如果它们至少保持数组长度不变，也尤其是这种情况。</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201211234100483.png" alt="image-20201211234100483"></p> <p>Arguments对象就是一个类数组对象，在客户端JS中，一些DOM方法（如document.getElementByTagName()）也返回类数组对象。</p> <p>下面这个函数可以用来<strong>检测类数组对象</strong>：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201211234154657.png" alt="image-20201211234154657"></p> <div class="custom-block tip"><p class="custom-block-title">关于数组和类数组对象定义疑惑</p> <p><strong>JavaScript 类数组对象的定义</strong></p> <ul><li>可以通过索引访问元素，并且拥有 length 属性；</li> <li>没有数组的其他方法，例如 <code>push</code> ， <code>forEach</code> ， <code>indexOf</code> 等。</li></ul> <p>如果按照这个定义，应该认定数组不是类数组对象，但是按照isArrayLike(o)函数将会推定数组是类数组对象。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isArrayLike</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>o <span class="token operator">&amp;&amp;</span>
        <span class="token keyword">typeof</span> o <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span>
        <span class="token function">isFinite</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> 
        o<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
        o<span class="token punctuation">.</span>length <span class="token operator">===</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
        o<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">4294967296</span>
        <span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">isArrayLike</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>参考jquery中类数组判定实现，也是判定obj本身是数组也是类数组对象：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isArrayLike</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果obj非null、undefined等，有length属性，则length等于obj.length</span>
    <span class="token comment">// 否则，length为false</span>
    <span class="token keyword">var</span> length <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>obj <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;length&quot;</span> <span class="token keyword">in</span> obj <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
        <span class="token comment">// 检测obj的类型</span>
        type <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
        
        <span class="token comment">// 如果obj是function类型 或者是window对象 则返回false</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">isWindow</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// obj本身是数组，则返回true</span>
        <span class="token comment">// obj不是数组，但有length属性且为0，例如{length : 0}，则返回true</span>
        <span class="token comment">// obj不是数组,但有length属性且为整数数值，obj[length - 1]存在，则返回true</span>
        <span class="token keyword">return</span> type <span class="token operator">===</span> <span class="token string">&quot;array&quot;</span> <span class="token operator">||</span> length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span>
            <span class="token keyword">typeof</span> length <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span> <span class="token operator">&amp;&amp;</span> length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">in</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>有点疑惑呢~</p></div> <p>类似上述的类数组对象的检测方法针对字符串常常返回false——它们通常最好当做字符串处理，而非数组。</p> <p>JS数组方法是特意定义为通用的，因此它们不仅应用在真正的数组而且<strong>在类数组对象上都能正确工作</strong>。</p> <p>在ES5中，所有数组的方法都是通用的，在ES3中，除了toString()和toLocaleString()以外的所有方法也是通用的。</p> <blockquote><p>concat()方法是一个特例：虽然可以用在类数组对象上，但它没有将那个对象扩充进返回的数组中的能力。</p></blockquote> <p>既然类数组对象没有继承自<code>Array.prototype</code>，那就不能在它们上面直接调用数组方法，可以<strong>间接地使用<code>Function.call</code>方法调用</strong>：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201212000724894.png" alt="image-20201212000724894"></p> <div class="custom-block tip"><p class="custom-block-title">类数组到数组的转换</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 方式一</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>

<span class="token comment">// 方式二</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 方式三</span>
<span class="token comment">// 这种方式要求 数据结构 必须有 遍历器接口</span>
<span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span> 

<span class="token comment">// 方式四</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span>

<span class="token comment">// 方式五：手动实现</span>
<span class="token keyword">function</span> <span class="token function">toArray</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>len <span class="token operator">=</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   
    arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>   
  <span class="token punctuation">}</span>  
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></div> <p>Firefox还将这些方法的版本在Array构造函数上直接定义为函数。使用这些方法定义的版本，例子可以这样重写：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201212000919529.png" alt="image-20201212000919529"></p> <p>当用在类数组对象上时，数组方法的静态函数版本非常有用。由于它们不是标准的，可以在使用前确认它们是否存在：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201212000957252.png" alt="image-20201212000957252"></p> <h2 id="作为数组的字符串"><a href="#作为数组的字符串" class="header-anchor">#</a> 作为数组的字符串</h2> <p>在ES5中字符串的行为类似于只读数组。除了用charAt()方法来访问单个的字符以外，还可以使用方括号：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;t&quot;</span>
s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// =&gt; &quot;e&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>针对字符串的typeof操作符返回string，给<code>Array.isArray()</code>传递字符串，返回false。</p> <p>用方括号代替charAt()调用，使得更加简单、可读、高效。</p> <p>不仅如此，字符串的行为类似于数组的事实使得通用的数组方法可以应用到字符串上：</p> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201212001256413.png" alt="image-20201212001256413"></p> <p>⭐字符串是不可变值，故当把它们看作数组看待时，它们是<strong>只读的</strong>。</p> <p>如push(),sort(),splice()等数组方法会修改数组，它们在字符串上是无效的。</p> <p>不仅如此，使用数组方法来修改字符串会导致错误：<strong>出错的时候没有提示。</strong></p> <blockquote><p>当前Chrome版本上还是有错误提示的。</p></blockquote> <p><img src="https://giriawsh-bucket.oss-cn-beijing.aliyuncs.com/img/image-20201212001541550.png" alt="image-20201212001541550"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/books/theDefinitiveGuideToJavaScript/lesslessjs-quan-wei-zhi-nan-greatergreater-di-qi-zhang-1.html" class="prev">
        第七章1
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d811c258.js" defer></script><script src="/assets/js/2.b0d06978.js" defer></script><script src="/assets/js/24.65381257.js" defer></script>
  </body>
</html>
